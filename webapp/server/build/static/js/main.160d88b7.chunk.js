(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{201:function(e,t,a){},332:function(e,t,a){},333:function(e,t,a){},340:function(e,t,a){e.exports=a.p+"static/media/rebloc_logo.4b472de4.svg"},422:function(e,t,a){e.exports=a(833)},692:function(e,t,a){},804:function(e,t,a){},811:function(e,t,a){},814:function(e,t,a){},816:function(e,t,a){},829:function(e,t,a){},833:function(e,t,a){"use strict";a.r(t);var n,r=a(9),i=a(12),s=a(20),c=a(19),o=a(21),l=a(4),u=a.n(l),p=a(34),m=a(24),d=a(361),h=a(15),f=a(23),E=function(){function e(){Object(r.a)(this,e),this.fileReader=void 0,this.fileReader=new FileReader}return Object(i.a)(e,[{key:"readFile",value:function(){var e=Object(f.a)(u.a.mark(function e(t){var a=this;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,n){try{a.fileReader.onload=function(){var t=a.fileReader.result;e(JSON.parse(t))},a.fileReader.onprogress=function(e){console.log(e)},a.fileReader.onerror=function(e){throw e},a.fileReader.readAsText(t)}catch(r){console.info(r),n(r)}}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),e}(),b=function(e){return e.FileState},v=a(338),O=a.n(v),y={type:"object",required:["fields","schema_name"],properties:{fields:{type:"array",minItems:1,items:{type:"object",required:["type","name","description","label"],additionalProperties:!1,properties:{description:{type:"string"},type:{type:"string"},name:{type:"string"},label:{type:"string"}}}},schema_name:{type:"string"}}},g=function(){function e(){Object(r.a)(this,e)}return Object(i.a)(e,[{key:"validate",value:function(){var e=Object(f.a)(u.a.mark(function e(t,a){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e){var n=new O.a({allErrors:!0}).compile(t);e(n(a)?[]:n.errors)}));case 1:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()}]),e}();!function(e){e.FILE_UPLOAD_ASYNC="FILE_UPLOAD_ASYNC",e.FILE_CHANGE="FILE_CHANGE",e.FILE_UPLOADED="FILE_UPLOADED",e.FILE_UPLOAD_VALIDATION_ERROR="FILE_UPLOAD_VALIDATION_ERROR",e.ADD_DATA_TO_FILE="ADD_DATA_TO_FILE"}(n||(n={}));var S=u.a.mark(T),_=u.a.mark(k),D=u.a.mark(j),A=new g;function T(e){var t,a,n,r,i,s,c,o;return u.a.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return t=e.fileId,a=e.validator,n=e.callbackAction,l.next=5,Object(h.c)(b);case 5:return r=l.sent,i=r.files.find(function(e){return e.fileId==t}),s=new E,l.next=10,s.readFile(i.blob);case 10:if(c=l.sent,o=[],!a){l.next=19;break}return l.next=15,A.validate(a,c);case 15:if(!((o=l.sent).length>0)){l.next=19;break}return l.next=19,Object(h.b)({type:"FILE_UPLOAD_VALIDATION_ERROR",errors:o,id:t});case 19:return l.next=21,Object(h.b)({type:"FILE_UPLOAD_ASYNC",value:c,id:t});case 21:if(!n||0!=o.length){l.next=24;break}return l.next=24,Object(h.b)({type:n,value:c});case 24:case"end":return l.stop()}},S,this)}function k(e){var t,a,r,i,s,c,o;return u.a.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return t=e.fileId,a=e.file,r=e.validator,i=e.callbackAction,l.next=6,Object(h.b)({type:n.FILE_CHANGE,file:a,fileId:t});case 6:return s=new E,l.next=9,s.readFile(a);case 9:if(c=l.sent,o=[],!r){l.next=18;break}return l.next=14,A.validate(r,c);case 14:if(!((o=l.sent).length>0)){l.next=18;break}return l.next=18,Object(h.b)({type:n.FILE_UPLOAD_VALIDATION_ERROR,errors:o,id:t});case 18:return l.next=20,Object(h.b)({type:n.FILE_UPLOAD_ASYNC,value:c,id:t});case 20:if(!i||0!=o.length){l.next=23;break}return l.next=23,Object(h.b)({type:i,value:c});case 23:case"end":return l.stop()}},_,this)}function j(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(h.d)("FILE_UPLOADED",T);case 2:return e.next=4,Object(h.d)("FILE_CHANGED_AND_UPLOADED",k);case 4:case"end":return e.stop()}},D,this)}var N,w=a(339),C={serverBase:location.protocol+"//"+location.hostname+":9000"},I=function(){function e(){Object(r.a)(this,e),this.baseUrl=void 0,this.baseUrl=location.protocol+"//"+location.hostname+":9000"}return Object(i.a)(e,[{key:"postDataset",value:function(){var e=Object(f.a)(u.a.mark(function e(t,a,n,r,i){var s,c;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=Object(w.v1)(),c={id:s,name:t.name||null,description:t.description||null,access_url:t.endpoint||null,api_key:t.sampleAPIKey||null,enc_data_key:t.sampleDataKey||null,search_terms:t.searchTerms?"{".concat(t.searchTerms,"}"):null,delivery_method:"API",dataset_owner_id:n,price_low:t.askPriceLow||null,price_high:t.askPriceHigh||null,num_of_records:t.records||null,country:t.country||null,state_province:t.state,date_created:new Date,date_modified:new Date,parameters:"{}",stage:r,json_schema:JSON.stringify(a),table_name:i},e.next=4,fetch("".concat(this.baseUrl,"/schema"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)});case 4:return e.abrupt("return",c);case 5:case"end":return e.stop()}},e,this)}));return function(t,a,n,r,i){return e.apply(this,arguments)}}()},{key:"updateDataset",value:function(){var e=Object(f.a)(u.a.mark(function e(t,a,n,r,i){var s;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s={id:r,name:t.name||null,description:t.description||null,access_url:t.access_url||null,api_key:t.api_key||null,enc_data_key:t.enc_data_key||null,search_terms:t.search_terms?"{".concat(t.search_terms,"}"):null,delivery_method:"API",dataset_owner_id:n,price_low:t.price_low||null,price_high:t.price_high||null,num_of_records:t.num_of_records||null,country:t.country||null,state_province:t.state_province||null,date_created:t.date_created,date_modified:new Date,parameters:"{}",stage:i,json_schema:JSON.stringify(a)},e.next=3,fetch("".concat(this.baseUrl,"/schema"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});case 3:return e.abrupt("return",s);case 4:case"end":return e.stop()}},e,this)}));return function(t,a,n,r,i){return e.apply(this,arguments)}}()},{key:"getUserDatasets",value:function(){var e=Object(f.a)(u.a.mark(function e(t){var a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(C.serverBase,"/schema/user/").concat(t));case 2:if(200===(a=e.sent).status){e.next=7;break}return e.abrupt("return",[]);case 7:return e.abrupt("return",a.json());case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getAllDatasets",value:function(){var e=Object(f.a)(u.a.mark(function e(){var t;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(C.serverBase,"/marketplace"));case 2:if(200===(t=e.sent).status){e.next=7;break}return e.abrupt("return",[]);case 7:return e.abrupt("return",t.json());case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getDataset",value:function(){var e=Object(f.a)(u.a.mark(function e(t,a){var n,r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(C.serverBase,"/schema/dataset/").concat(t),a&&(n+="?userid=".concat(a)),e.next=4,fetch(n);case 4:if(200===(r=e.sent).status){e.next=9;break}return e.abrupt("return",[]);case 9:return e.abrupt("return",r.json());case 10:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"deleteDataset",value:function(){var e=Object(f.a)(u.a.mark(function e(t){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(C.serverBase,"/schema/dataset/").concat(t),{method:"DELETE"});case 2:if(200===e.sent.status){e.next=7;break}throw new Error("Deleting of asset ".concat(t," was not successful"));case 7:return e.abrupt("return");case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"searchDatasets",value:function(){var e=Object(f.a)(u.a.mark(function e(t){var a,n,r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat(C.serverBase,"/marketplace/search"),n=0,t.terms.length&&(n++,a+="?terms=".concat(t.terms.join(","))),t.selectedCountry&&(a+="".concat(0===n?"?":"&","country=").concat(t.selectedCountry),n++),t.selectedState&&(a+="".concat(0===n?"?":"&","state=").concat(t.selectedState),n++),t.selectedCity&&(a+="".concat(0===n?"?":"&","cities=").concat(t.selectedCity),n++),t.topics&&t.topics.length&&(a+="".concat(0===n?"?":"&","topics=").concat(t.topics.join(","))),e.next=9,fetch(a);case 9:if(200===(r=e.sent).status){e.next=14;break}return e.abrupt("return",[]);case 14:return e.abrupt("return",r.json());case 15:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getSampleData",value:function(){var e=Object(f.a)(u.a.mark(function e(t){var a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(C.serverBase,"/schema/dataset/sample/").concat(t));case 2:if(200===(a=e.sent).status){e.next=7;break}throw new Error("Something went wrong while retrieving sample data");case 7:return e.abrupt("return",a.json());case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),e}();function x(){return{type:N.NEXT_STEP}}function P(){return{type:N.PREV_STEP}}function F(e){return{type:N.CHANGE_NO_SCHEMA_ERROR,displayError:e}}function R(e){return{type:N.UPDATE_DATASET_FORM,dataset:e}}function L(e,t,a,n,r){return{type:N.DATASET_FORM_SAVED,basicInfo:e,schema:t,id:a,stage:n,schemaName:r}}function M(){return{type:N.RESET}}!function(e){e.NEXT_STEP="NEXT_STEP",e.PREV_STEP="PREV_STEP",e.GOTO_STEP="GOTO_STEP",e.LOAD_SCHEMA_LIST="LOAD_SCHEMA_LIST",e.CHANGE_NO_SCHEMA_ERROR="CHANGE_NO_SCHEMA_ERROR",e.DATASET_SAVED="DATASET_SAVED",e.UPDATE_DATASET_FORM="UPDATE_DATASET_FORM",e.RESET="RESET",e.UPDATE_DATASET="UPDATE_DATASET",e.DATASET_FORM_SAVED="DATASET_FORM_SAVED"}(N||(N={}));var U,G=u.a.mark(X),H=u.a.mark(B);function X(e){var t,a,n,r,i,s,c;return u.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.basicInfo,a=e.schema,n=e.id,r=e.stage,i=e.schemaName,s=new I,o.next=4,s.postDataset(t,a,n,r,i);case 4:return c=o.sent,o.next=7,Object(h.b)({type:N.DATASET_SAVED,dataset:c});case 7:case"end":return o.stop()}},G,this)}function B(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(h.d)(N.DATASET_FORM_SAVED,X);case 2:case"end":return e.stop()}},H,this)}function V(){return{type:U.GET_PROFILE}}function z(e){return{type:U.CHECK_PROFILE,email:e}}function W(e,t,a){return{type:U.CONFIRM_EMAIL,email:e,code:t,notify:a}}function J(e){return{type:U.RESEND_VERIFICATION,email:e}}!function(e){e.SET_PROFILE="SET_PROFILE",e.SET_TEMP_PROFILE="SET_TEMP_PROFILE",e.GET_PROFILE="GET_PROFILE",e.UPDATE_PROFILE="UPDATE_PROFILE",e.CONFIRM_EMAIL="CONFIRM_EMAIL",e.RESEND_VERIFICATION="RESEND_VERIFICATION",e.CHECK_PROFILE="CHECK_PROFILE",e.EMAIL_VERIFIED="EMAIL_VERIFIED",e.VERIFICATION_EMAIL_SENT="VERIFICATION_EMAIL_SENT"}(U||(U={}));var q,Y=function(){function e(){Object(r.a)(this,e)}return Object(i.a)(e,[{key:"getProfile",value:function(){var e=Object(f.a)(u.a.mark(function e(t){var a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(C.serverBase,"/profile/").concat(t));case 2:if(200===(a=e.sent).status){e.next=7;break}return e.abrupt("return",{});case 7:return e.abrupt("return",a.json());case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"updateProfile",value:function(){var e=Object(f.a)(u.a.mark(function e(t,a){var n,r,i;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=JSON.parse(localStorage.getItem("profile")),r=Object.assign({},n,{primary_email:t,secondary_email:a.secondaryEmail,first_name:a.firstName,last_name:a.lastName,address:a.address,phone:a.phone,id:a.id||null}),e.next=4,fetch("".concat(C.serverBase,"/profile"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});case 4:return i=e.sent,e.abrupt("return",i.json());case 6:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"resendVerification",value:function(){var e=Object(f.a)(u.a.mark(function e(t){var a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={primary_email:t},e.next=3,fetch("".concat(C.serverBase,"/profile"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});case 3:if(!e.sent.ok){e.next=8;break}return e.abrupt("return",!0);case 8:throw new Error("Something went wrong resending the verification email");case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),e}(),K=function(){function e(){Object(r.a)(this,e),this.baseUrl=void 0,this.baseUrl=location.protocol+"//"+location.hostname+":9000"}return Object(i.a)(e,[{key:"retrieveSampleData",value:function(){var e=Object(f.a)(u.a.mark(function e(t,a,n){var r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={dataset_id:a,dataset_name:n,subject:"Sample Data Info",type:"s"},e.next=3,fetch("".concat(this.baseUrl,"/emailer/").concat(t),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});case 3:return e.abrupt("return",r);case 4:case"end":return e.stop()}},e,this)}));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"retrieveReciept",value:function(){var e=Object(f.a)(u.a.mark(function e(t,a,n,r){var i;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i={dataset_id:a,dataset_name:n,subject:"Thank you for purchasing dataset ".concat(a),type:"t",price:r},e.next=3,fetch("".concat(this.baseUrl,"/emailer/").concat(t),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)});case 3:return e.abrupt("return",i);case 4:case"end":return e.stop()}},e,this)}));return function(t,a,n,r){return e.apply(this,arguments)}}()},{key:"sendEmail",value:function(){var e=Object(f.a)(u.a.mark(function e(t){var a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={dataset_id:t.datasetId,dataset_name:t.datasetName,subject:t.subject,message:t.message},e.next=3,fetch("".concat(this.baseUrl,"/emailer/").concat(t.from,"/send/").concat(t.to),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});case 3:return e.abrupt("return",a);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"verifyEmail",value:function(){var e=Object(f.a)(u.a.mark(function e(t,a){var n,r,i;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(this.baseUrl,"/profile/verify/").concat(t),r={code:a},e.next=4,fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});case 4:if(!(i=e.sent).ok){e.next=9;break}return e.abrupt("return",i.json());case 9:throw new Error("Something went wrong with verifying the email");case 10:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()}]),e}(),Q=new K,$=u.a.mark(ie),Z=u.a.mark(se),ee=u.a.mark(ce),te=u.a.mark(oe),ae=u.a.mark(le),ne=u.a.mark(ue),re=new Y;function ie(e){var t,a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=JSON.parse(localStorage.getItem("profile")),a=localStorage.getItem("email"),e.next=4,Object(h.b)({type:U.SET_PROFILE,profile:t,email:a});case 4:case"end":return e.stop()}},$,this)}function se(e){var t,a;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.email,n.prev=1,n.next=4,re.getProfile(t);case 4:return a=n.sent,n.next=7,Object(h.b)({type:U.SET_TEMP_PROFILE,profile:a});case 7:n.next=11;break;case 9:n.prev=9,n.t0=n.catch(1);case 11:case"end":return n.stop()}},Z,this,[[1,9]])}function ce(e){var t;return u.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Q.verifyEmail(e.email,e.code);case 3:if(!a.sent){a.next=12;break}return(t=JSON.parse(localStorage.getItem("profile"))).primary_email_verified=!0,localStorage.setItem("profile",JSON.stringify(t)),a.next=10,Object(h.b)({type:U.SET_PROFILE,profile:t,email:e.email});case 10:return a.next=12,Object(h.b)({type:U.EMAIL_VERIFIED});case 12:a.next=17;break;case 14:a.prev=14,a.t0=a.catch(0),e.notify("Your email was not verified",{variant:"error"});case 17:case"end":return a.stop()}},ee,this,[[0,14]])}function oe(e){var t,a,n;return u.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.email,a=e.profile,r.next=4,re.updateProfile(t,a);case 4:return n=r.sent,r.next=7,Object(h.b)({type:U.SET_PROFILE,profile:JSON.stringify(n),email:t});case 7:localStorage.setItem("profile",JSON.stringify(n)),e.notify("Your profile was successfully updated",{variant:"success"});case 9:case"end":return r.stop()}},te,this)}function le(e){var t;return u.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.email,a.prev=1,a.next=4,re.resendVerification(t);case 4:return a.next=6,Object(h.b)({type:U.VERIFICATION_EMAIL_SENT});case 6:a.next=11;break;case 8:a.prev=8,a.t0=a.catch(1),console.log(a.t0);case 11:case"end":return a.stop()}},ae,this,[[1,8]])}function ue(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(h.d)(U.GET_PROFILE,ie);case 2:return e.next=4,Object(h.d)(U.UPDATE_PROFILE,oe);case 4:return e.next=6,Object(h.d)(U.CONFIRM_EMAIL,ce);case 6:return e.next=8,Object(h.d)(U.RESEND_VERIFICATION,le);case 8:return e.next=10,Object(h.d)(U.CHECK_PROFILE,se);case 10:case"end":return e.stop()}},ne,this)}function pe(e){return{type:q.CHANGE_SCHEMA_FILTER,schemaFilter:e}}function me(e,t,a){return{type:q.CHANGE_DIALOG_STATE,isOpen:e,mode:t,dataset:a}}function de(e,t){return{type:q.CHANGE_CONFIRM_DIALOG_STATE,isOpen:e,dataset:t}}function he(e){return{type:q.CHANGE_SEARCH,search:e}}function fe(){return{type:q.GET_USER_DATASETS}}function Ee(){return{type:q.GET_ALL_DATASETS}}function be(e){return{type:q.USER_DATASETS_RETRIEVED,datasets:e}}function ve(e){return{type:q.DELETE_DATASET,datasetId:e}}function Oe(e){return{type:q.SEARCH_DATASETS,filters:e}}!function(e){e.CHANGE_SCHEMA_FILTER="CHANGE_SCHEMA_FILTER",e.GET_USER_DATASETS="GET_USER_DATASETS",e.DATASETS_RETRIEVED="DATASETS_RETRIEVED",e.USER_DATASETS_RETRIEVED="USER_DATASETS_RETRIEVED",e.GET_ALL_DATASETS="GET_ALL_DATASETS",e.CHANGE_DIALOG_STATE="CHANGE_DIALOG_STATE",e.CHANGE_CONFIRM_DIALOG_STATE="CHANGE_CONFIRM_DIALOG_STATE",e.DELETE_DATASET="DELETE_DATASET",e.DATASET_DELETED="DATASET_DELETED",e.CHANGE_SEARCH="CHANGE_SEARCH",e.SEARCH_DATASETS="SEARCH_DATASETS",e.DATASETS_SEARCHED="DATASETS_SEARCHED"}(q||(q={}));var ye,ge=u.a.mark(Te),Se=u.a.mark(ke),_e=u.a.mark(je),De=u.a.mark(Ne),Ae=u.a.mark(we);function Te(){var e,t,a;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(e=JSON.parse(localStorage.getItem("profile")),t=new I,!e.id){n.next=10;break}return n.next=5,t.getUserDatasets(e.id);case 5:return a=n.sent,n.next=8,Object(h.b)(be(a));case 8:n.next=12;break;case 10:return n.next=12,Object(h.b)(be([]));case 12:case"end":return n.stop()}},ge,this)}function ke(){var e,t;return u.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e=new I,a.next=3,e.getAllDatasets();case 3:return t=a.sent,a.next=6,Object(h.b)({type:q.DATASETS_RETRIEVED,datasets:t});case 6:case"end":return a.stop()}},Se,this)}function je(e){var t,a;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.datasetId,a=new I,n.prev=2,n.next=5,a.deleteDataset(t);case 5:return n.next=7,Object(h.b)({type:q.DATASET_DELETED,datasetId:t});case 7:n.next=11;break;case 9:n.prev=9,n.t0=n.catch(2);case 11:case"end":return n.stop()}},_e,this,[[2,9]])}function Ne(e){var t,a,n;return u.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.filters,a=new I,r.next=4,a.searchDatasets(t);case 4:return n=r.sent,r.next=7,Object(h.b)({type:q.DATASETS_SEARCHED,datasets:n});case 7:case"end":return r.stop()}},De,this)}function we(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(h.d)(q.GET_USER_DATASETS,Te);case 2:return e.next=4,Object(h.d)(q.GET_ALL_DATASETS,ke);case 4:return e.next=6,Object(h.d)(q.DELETE_DATASET,je);case 6:return e.next=8,Object(h.d)(q.SEARCH_DATASETS,Ne);case 8:case"end":return e.stop()}},Ae,this)}function Ce(e){return{type:ye.GET_DATASET_INFO,datasetId:e}}function Ie(e){return{type:ye.CHANGE_MORE_OPTION_MENU,isOpen:e}}function xe(e,t,a){return{type:ye.CHANGE_SCHEMA,val:e,field:t,index:a}}function Pe(e,t,a,n,r,i,s){return{type:ye.UPDATE_DATASET,basicInfo:e,schema:t,ownerId:a,datasetId:n,stage:r,notify:i,message:s}}function Fe(e){return{type:ye.CHANGE_BASIC_INFO_FORM,isOpen:e}}function Re(e){return{type:ye.CHANGE_UPLOAD_DIALOG,isOpen:e}}function Le(e){return{type:ye.CHANGE_BUY_DATASET_DIALOG,isOpen:e}}function Me(e){return{type:ye.CHANGE_SEND_EMAIL_DIALOG,isOpen:e}}function Ue(e){return{type:ye.GET_SAMPLE_DATA,datasetId:e}}function Ge(e,t){return{type:ye.SEND_EMAIL,emailInquiry:e,notify:t}}function He(e,t,a){return{type:ye.BUY_DATASET,token:e,dataset:t,user:a}}function Xe(e){return e.search_terms instanceof Array||(e.search_terms=e.search_terms?e.search_terms.split(","):null),e.price_high=Number(e.price_high),{type:ye.UPDATE_DATASET_INFO,dataset:e}}!function(e){e.GET_DATASET_INFO="GET_DATASET_INFO",e.UPDATE_DATASET_INFO="UPDATE_DATASET_INFO",e.DATASET_INFO_RETRIEVED="DATASET_INFO_RETRIEVED",e.CHANGE_MORE_OPTION_MENU="CHANGE_MORE_OPTION_MENU",e.CHANGE_SCHEMA="CHANGE_SCHEMA",e.CHANGE_BASIC_INFO_FORM="CHANGE_BASIC_INFO_FORM",e.CHANGE_UPLOAD_DIALOG="CHANGE_UPLOAD_DIALOG",e.CHANGE_SAMPLE_DIALOG="CHANGE_SAMPLE_DIALOG",e.CHANGE_BUY_DATASET_DIALOG="CHANGE_BUY_DATASET_DIALOG",e.CHANGE_SEND_EMAIL_DIALOG="CHANGE_SEND_EMAIL_DIALOG",e.UPDATE_DATASET="UPDATE_DATASET",e.UPDATE_SAMPLE_DATA="UPDATE_SAMPLE_DATA",e.DATASET_UPDATED="DATASET_UPDATED",e.GET_SAMPLE_DATA_EMAIL="GET_SAMPLE_DATA_EMAIL",e.GET_SAMPLE_DATA="GET_SAMPLE_DATA",e.SEND_EMAIL="SEND_EMAIL",e.BUY_DATASET="BUY_DATASET"}(ye||(ye={}));var Be,Ve=a(202);Ve.config(),Be=".env.production",Ve.config({path:Be});var ze,We=function(){function e(){Object(r.a)(this,e)}return Object(i.a)(e,[{key:"checkout",value:function(){var e=Object(f.a)(u.a.mark(function e(t,a){var n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("http://demo-app.rebloc.io:9000/stripe/charge","/").concat(a),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 2:return n=e.sent,console.log("stripe results"),console.log(n),e.abrupt("return",n.json());case 6:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()}]),e}(),Je=function e(t,a,n,i,s,c,o){Object(r.a)(this,e),this.buyer_id=void 0,this.dataset_id=void 0,this.dataset_name=void 0,this.trade=void 0,this.pricing_unit=void 0,this.payment_txn_ref=void 0,this.order_timestamp=void 0,this.buyer_id=t,this.dataset_id=a,this.dataset_name=n,this.trade=i,this.pricing_unit=s,this.payment_txn_ref=c,this.order_timestamp=new Date(1e3*o)},qe=new(function(){function e(){Object(r.a)(this,e),this.baseUrl=void 0,this.baseUrl=location.protocol+"//"+location.hostname+":9000"}return Object(i.a)(e,[{key:"getOrderHistory",value:function(){var e=Object(f.a)(u.a.mark(function e(t){var a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(C.serverBase,"/marketplace/order/list/").concat(t));case 2:if(200===(a=e.sent).status){e.next=7;break}return e.abrupt("return",[]);case 7:return e.abrupt("return",a.json());case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"postOrder",value:function(){var e=Object(f.a)(u.a.mark(function e(t){var a,n,r,i,s,c,o,l,p;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.dataset_id,n=t.buyer_id,r=t.order_timestamp,i=t.payment_txn_ref,s=t.pricing_unit,c=t.trade,o=t.dataset_name,l={dataset_id:a,dataset_name:o,buyer_id:n,order_timestamp:r,payment_txn_ref:i,pricing_unit:s,trade:c},e.next=4,fetch("".concat(C.serverBase,"/marketplace/order/submit"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)});case 4:if(200===(p=e.sent).status){e.next=9;break}return e.abrupt("return",[]);case 9:return e.abrupt("return",p);case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),e}()),Ye=u.a.mark(at),Ke=u.a.mark(nt),Qe=u.a.mark(rt),$e=u.a.mark(it),Ze=u.a.mark(st),et=u.a.mark(ct),tt=u.a.mark(ot);function at(e){var t,a,n,r;return u.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(t=e.datasetId,a=new I,(n=JSON.parse(localStorage.getItem("profile"))).id){i.next=9;break}return i.next=6,a.getDataset(t);case 6:r=i.sent,i.next=12;break;case 9:return i.next=11,a.getDataset(t,n.id);case 11:r=i.sent;case 12:return r.json_schema=JSON.parse(r.json_schema),r.json_schema instanceof Array||(r.json_schema=[]),i.next=16,Object(h.b)({type:ye.DATASET_INFO_RETRIEVED,dataset:r});case 16:case"end":return i.stop()}},Ye,this)}function nt(e){var t,a,n,r,i,s,c;return u.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.basicInfo,a=e.schema,n=e.ownerId,r=e.datasetId,i=e.stage,s=new I,o.next=4,s.updateDataset(t,a,n,r,i);case 4:return c=o.sent,e.notify(e.message,{variant:"success"}),o.next=8,Object(h.b)({type:ye.DATASET_UPDATED,dataset:c});case 8:case"end":return o.stop()}},Ke,this)}function rt(e){var t,a,n,r;return u.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.email,a=e.datasetId,n=e.datasetName,r=new K,i.prev=2,i.next=5,r.retrieveSampleData(t,a,n);case 5:return e.notify("Email was sent successfully",{variant:"success"}),i.next=8,Object(h.b)((s=!1,{type:ye.CHANGE_SAMPLE_DIALOG,isOpen:s}));case 8:i.next=13;break;case 10:i.prev=10,i.t0=i.catch(2),e.notify("Something went wrong with sending the Sample Data",{variant:"error"});case 13:case"end":return i.stop()}var s},Qe,this,[[2,10]])}function it(e){var t,a,n;return u.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.datasetId,a=new I,r.prev=2,r.next=5,a.getSampleData(t);case 5:return n=r.sent,console.log(n),r.next=9,Object(h.b)((i=n,{type:ye.UPDATE_SAMPLE_DATA,sampleData:i}));case 9:r.next=13;break;case 11:r.prev=11,r.t0=r.catch(2);case 13:case"end":return r.stop()}var i},$e,this,[[2,11]])}function st(e){var t,a;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.emailInquiry,a=new K,n.prev=2,n.next=5,a.sendEmail(t);case 5:return e.notify("Email was sent successfully",{variant:"success"}),n.next=8,Object(h.b)(Me(!1));case 8:n.next=13;break;case 10:n.prev=10,n.t0=n.catch(2),e.notify("Something went wrong with sending the email",{variant:"error"});case 13:case"end":return n.stop()}},Ze,this,[[2,10]])}function ct(e){var t,a,n,r,i,s,c,o,l;return u.a.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return t=e.token,a=e.dataset,n=e.user,r=Number(100*a.price_high),i={amount:r,description:a.description,product:a.id,stripeTokenType:t.type,stripeEmail:t.email,stripeToken:t.id,token:t},s=new We,c=new K,u.next=7,s.checkout(i,n.id);case 7:return o=u.sent,u.next=10,c.retrieveReciept(t.email,a.id,a.name,r/100);case 10:l=new Je(n.id,a.id,a.name,r/100,"USD",o.ref,o.timestamp),console.log(l),qe.postOrder(l);case 13:case"end":return u.stop()}},et,this)}function ot(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(h.d)(ye.GET_DATASET_INFO,at);case 2:return e.next=4,Object(h.d)(N.UPDATE_DATASET,nt);case 4:return e.next=6,Object(h.d)(ye.GET_SAMPLE_DATA_EMAIL,rt);case 6:return e.next=8,Object(h.d)(ye.GET_SAMPLE_DATA,it);case 8:return e.next=10,Object(h.d)(ye.SEND_EMAIL,st);case 10:return e.next=12,Object(h.d)(ye.BUY_DATASET,ct);case 12:case"end":return e.stop()}},tt,this)}function lt(){return{type:ze.GET_ORDERS}}function ut(e){return{type:ze.SET_ORDERS,orders:e}}!function(e){e.GET_ORDERS="GET_ORDERS",e.SET_ORDERS="SET_ORDERS"}(ze||(ze={}));var pt,mt=a(43),dt=function(e){return e.ProfileState.profile},ht=function(e){return e.ProfileState.email},ft=function(e){return e.ProfileState.verificationEmailSent};!function(e){e.NOT_CREATED="NOT_CREATED",e.ALREADY_VERIFIED="ALREADY_VERIFIED",e.NOT_VERIFIED="NOT_VERIFIED",e.VERIFIED="VERIFIED"}(pt||(pt={}));var Et,bt=Object(mt.a)([dt],function(e){return!!e&&!!e.id}),vt=Object(mt.a)([function(e){return e.ProfileState.tempProfile}],function(e){return console.log(e),"verified"==e?pt.VERIFIED:e?e.id?1==e.primary_email_verified?pt.ALREADY_VERIFIED:pt.NOT_VERIFIED:pt.NOT_CREATED:void 0}),Ot=(Object(mt.a)([dt],function(e){return!!e&&1==e.primary_email_verfied}),u.a.mark(gt)),yt=u.a.mark(St);function gt(){var e,t,a,n;return u.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(h.c)();case 2:return e=r.sent,t=dt(e),a=t.id,r.next=6,qe.getOrderHistory(a);case 6:return n=r.sent,r.next=9,Object(h.b)(ut(n));case 9:case"end":return r.stop()}},Ot,this)}function St(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(h.d)(ze.GET_ORDERS,gt);case 2:case"end":return e.stop()}},yt,this)}function _t(e){return{type:Et.SET_TOPICS,topics:e}}function Dt(){return{type:Et.GET_TOPICS}}!function(e){e.GET_TOPICS="GET_TOPICS",e.SET_TOPICS="SET_TOPICS"}(Et||(Et={}));var At=a(107),Tt=new(function(){function e(){Object(r.a)(this,e)}return Object(i.a)(e,[{key:"invoke",value:function(){var e=Object(f.a)(u.a.mark(function e(t,a,n,r){var i,s,c;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=localStorage.getItem(n))){e.next=13;break}if(i=JSON.parse(i),s=(new Date).valueOf(),c=new Date(i.timestamp).valueOf(),!(s-c>r)){e.next=10;break}return e.next=9,this.makeRequest(t,a,n);case 9:return e.abrupt("return",e.sent);case 10:return e.abrupt("return",i.data);case 13:return e.next=15,this.makeRequest(t,a,n);case 15:return e.abrupt("return",e.sent);case 16:case"end":return e.stop()}},e,this)}));return function(t,a,n,r){return e.apply(this,arguments)}}()},{key:"makeRequest",value:function(){var e=Object(f.a)(u.a.mark(function e(t,a,n){var r,i;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,a);case 2:if(!(r=e.sent).ok){e.next=9;break}return e.next=6,r.json();case 6:return i=e.sent,localStorage.setItem(n,JSON.stringify({timestamp:new Date,data:i})),e.abrupt("return",i);case 9:return e.abrupt("return");case 10:case"end":return e.stop()}},e,this)}));return function(t,a,n){return e.apply(this,arguments)}}()}]),e}()),kt=new(function(){function e(){Object(r.a)(this,e)}return Object(i.a)(e,[{key:"getTopics",value:function(){var e=Object(f.a)(u.a.mark(function e(){var t;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Tt.invoke("".concat(C.serverBase,"/schema/topics"),{method:"GET"},"topics",432e5);case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:return e.abrupt("return",t);case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}]),e}()),jt=u.a.mark(wt),Nt=u.a.mark(Ct);function wt(){var e;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,kt.getTopics();case 2:return e=t.sent,console.log("Here are the topics"),console.log(e),t.next=7,Object(At.b)(_t(e));case 7:case"end":return t.stop()}},jt,this)}function Ct(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(At.d)(Et.GET_TOPICS,wt);case 2:case"end":return e.stop()}},Nt,this)}var It,xt=a(38),Pt={files:[]},Ft=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pt,t=arguments.length>1?arguments[1]:void 0,a=Object.assign({},e);switch(t.type){case n.FILE_UPLOAD_ASYNC:var r=a.files.find(function(e){return t.id==e.fileId});r=Object(xt.a)({},r,{content:t.value}),a.files=[].concat(Object(p.a)(a.files.filter(function(e){return e.fileId!=t.id})),[r]);break;case n.FILE_CHANGE:var i={blob:t.file,fileId:t.fileId};a.files=[].concat(Object(p.a)(a.files.filter(function(e){return e.fileId!=t.fileId})),[i]);break;case n.FILE_UPLOAD_VALIDATION_ERROR:var s=a.files.find(function(e){return t.id==e.fileId});s=Object(xt.a)({},s,{errors:t.errors}),a.files=[].concat(Object(p.a)(a.files.filter(function(e){return e.fileId!=t.id})),[s]);break;case n.ADD_DATA_TO_FILE:var c=a.files.find(function(e){return t.id==e.fileId});Array.isArray(c.content)&&(c.content=[].concat(Object(p.a)(c.content),[t.data]));default:return e}return a},Rt={wizard:{steps:[{label:"Upload Schema",completed:!1},{label:"Review",completed:!1},{label:"Additional Info",completed:!1,nextButtonValue:"Save"}],editSteps:[{label:"Dataset Info",completed:!1},{label:"Manage Schema",completed:!1},{label:"Republish",nextButtonValue:"Update Dataset"}],currentStep:0},schema:[],displayNoSchemaError:!1,datasetPublished:!1,datasetPublishedId:void 0,schemaName:"Schema"},Lt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rt,t=arguments.length>1?arguments[1]:void 0,a=Object(xt.a)({},e);switch(t.type){case N.NEXT_STEP:a.wizard.currentStep=e.wizard.currentStep==e.wizard.steps.length-1?e.wizard.steps.length-1:e.wizard.currentStep+1;break;case N.PREV_STEP:a.wizard.currentStep=0==e.wizard.currentStep?0:e.wizard.currentStep-1;break;case N.GOTO_STEP:a.wizard.currentStep=t.step;break;case N.CHANGE_NO_SCHEMA_ERROR:a.displayNoSchemaError=t.displayError;break;case N.DATASET_SAVED:a.datasetPublishedId=t.dataset.id,a.datasetPublished=!0;break;case N.LOAD_SCHEMA_LIST:t.value&&(console.log("Action Value"),console.log(t.value),a.displayNoSchemaError=!1,a.schema=Object(p.a)(t.value.fields),a.schemaName=t.value.schema_name);break;case N.UPDATE_DATASET_FORM:a.schema=JSON.parse(t.dataset.json_schema);break;case N.RESET:a.schema=[],a.wizard.currentStep=0,a.datasetPublished=!1,a.datasetPublishedId=void 0;break;default:return e}return a},Mt={profile:void 0,tempProfile:void 0,email:"",verificationEmailSent:!1},Ut=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Mt,t=arguments.length>1?arguments[1]:void 0,a=Object(xt.a)({},e);switch(t.type){case U.SET_PROFILE:a.profile=t.profile,a.email=t.email;break;case U.SET_TEMP_PROFILE:a.tempProfile=t.profile;break;case U.EMAIL_VERIFIED:a.tempProfile="verified";break;case U.VERIFICATION_EMAIL_SENT:a.verificationEmailSent=!0;break;default:return e}return a},Gt={schemaFilter:"purchasable",datasets:[],userDatasets:[],datasetDialog:{open:!1,mode:"add",dataset:void 0},confirmDeleteDialog:{open:!1,dataset:{name:""}},search:""},Ht=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gt,t=arguments.length>1?arguments[1]:void 0,a=Object(xt.a)({},e);switch(t.type){case q.CHANGE_SCHEMA_FILTER:a.schemaFilter=t.schemaFilter;break;case q.DATASETS_RETRIEVED:a.datasets=t.datasets;break;case q.USER_DATASETS_RETRIEVED:a.userDatasets=t.datasets;break;case q.CHANGE_DIALOG_STATE:a.datasetDialog=Object(xt.a)({},e.datasetDialog),a.datasetDialog.open=t.isOpen,a.datasetDialog.dataset=t.dataset,a.datasetDialog.mode=t.mode;break;case q.CHANGE_CONFIRM_DIALOG_STATE:a.confirmDeleteDialog=Object(xt.a)({},e.confirmDeleteDialog),a.confirmDeleteDialog.open=t.isOpen,a.confirmDeleteDialog.dataset=t.dataset;break;case q.DATASET_DELETED:a.datasets=Object(p.a)(a.datasets.filter(function(e){return e.id!=t.datasetId})),a.userDatasets=Object(p.a)(a.userDatasets.filter(function(e){return e.id!=t.datasetId}));break;case q.CHANGE_SEARCH:a.search=t.search;break;case q.DATASETS_SEARCHED:a.datasets=Object(p.a)(e.datasets),a.datasets=t.datasets;break;case N.DATASET_SAVED:a.userDatasets=[t.dataset].concat(Object(p.a)(e.userDatasets));break;default:return e}return a};function Xt(e){return{type:It.UPDATE_PROFILE_MENU_OPEN,isOpen:e}}!function(e){e.UPDATE_PROFILE_MENU_OPEN="UPDATE_PROFILE_MENU_OPEN "}(It||(It={}));var Bt={profileMenuOpen:!1},Vt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bt,t=arguments.length>1?arguments[1]:void 0,a=Object(xt.a)({},e);switch(t.type){case It.UPDATE_PROFILE_MENU_OPEN:a.profileMenuOpen=t.isOpen;break;default:return e}return a},zt={dataset:{},schema:[],sampleData:[],moreOptionsOpened:!1,isBasicFormOpen:!1,isFileUploadOpen:!1,isSampleDataOpen:!1,isBuyDatasetOpen:!1,isSendEmailOpen:!1},Wt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zt,t=arguments.length>1?arguments[1]:void 0,a=Object(xt.a)({},e);switch(t.type){case ye.DATASET_INFO_RETRIEVED:a.dataset=t.dataset,a.schema=t.dataset.json_schema;break;case ye.CHANGE_MORE_OPTION_MENU:a.moreOptionsOpened=t.isOpen;break;case ye.CHANGE_SCHEMA:a.schema=Object(p.a)(a.schema),a.schema[t.index][t.field]=t.val;break;case ye.CHANGE_BASIC_INFO_FORM:a.isBasicFormOpen=t.isOpen;break;case ye.CHANGE_UPLOAD_DIALOG:a.isFileUploadOpen=t.isOpen;break;case ye.CHANGE_SAMPLE_DIALOG:a.isSampleDataOpen=t.isOpen;break;case ye.CHANGE_BUY_DATASET_DIALOG:a.isBuyDatasetOpen=t.isOpen;break;case ye.CHANGE_SEND_EMAIL_DIALOG:a.isSendEmailOpen=t.isOpen;break;case ye.UPDATE_DATASET_INFO:a.dataset=Object.assign({},a.dataset,t.dataset);break;case ye.DATASET_UPDATED:a.dataset=Object(xt.a)({},a.dataset),a.dataset.stage=t.dataset.stage;break;case ye.UPDATE_SAMPLE_DATA:a.sampleData=t.sampleData;break;default:return e}return a},Jt={orders:[]},qt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jt,t=arguments.length>1?arguments[1]:void 0,a=Object(xt.a)({},e);switch(t.type){case ze.SET_ORDERS:a.orders=t.orders;break;default:return e}return a},Yt={topics:[]},Kt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yt,t=arguments.length>1?arguments[1]:void 0,a=Object(xt.a)({},e);switch(t.type){case Et.SET_TOPICS:a.topics=t.topics;break;default:return e}return a},Qt=a(336),$t=function(){function e(){Object(r.a)(this,e),this._store=void 0}return Object(i.a)(e,[{key:"initialize",value:function(){var e=u.a.mark(n);console.info("App store is intializing!");var t=Object(d.a)(),a=Object(m.c)({FileState:Ft,DatasetFormState:Lt,ProfileState:Ut,MarketplaceState:Ht,DatasetInfoState:Wt,AppState:Vt,OrderState:qt,Common:Kt,form:Qt.a});function n(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(h.a)([].concat(Object(p.a)([j()]),Object(p.a)([B()]),Object(p.a)([ue()]),Object(p.a)([we()]),Object(p.a)([ot()]),Object(p.a)([St()]),Object(p.a)([Ct()])));case 2:case"end":return e.stop()}},e,this)}this.store=Object(m.e)(a,Object(m.a)(t)),t.run(n)}},{key:"store",get:function(){return this._store},set:function(e){this._store=e}}],[{key:"getInstance",value:function(){return e.instance||(e.instance=new e),e.instance}}]),e}();$t.instance=void 0;var Zt,ea=a(0),ta=a.n(ea),aa=a(40),na=a.n(aa),ra=a(213),ia=a(47),sa=a(31),ca=a(1),oa=a(29),la=a(345),ua=a.n(la),pa=a(143),ma=a.n(pa),da=a(346),ha=a.n(da),fa=a(344),Ea=a.n(fa),ba=a(48),va=a(836),Oa=function e(t,a){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"app";Object(r.a)(this,e),this.title=void 0,this.url=void 0,this.icon=void 0,this.type=void 0,this.title=t,this.url=a,this.icon=n,this.type=i},ya=a(340),ga=a.n(ya),Sa=a(69),_a=a.n(Sa),Da=function(e){function t(){return Object(r.a)(this,t),Object(s.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return null!==this.props.initial&&""!=this.props.initial?ta.a.createElement(ca.b,{id:"avatar",color:"primary",className:"avatar"},this.props.initial):ta.a.createElement(ca.b,{id:"avatar",className:"avatar"},ta.a.createElement(_a.a,null))}}]),t}(ea.Component),Aa=(a(692),a(341)),Ta=a.n(Aa),ka=a(343),ja=a.n(ka),Na=a(342),wa=a.n(Na),Ca=function(e){var t=e.profile,a=e.open,n=e.onClickAway,r=function(e){1==a&&n(e)};return ea.createElement(ca.E,{anchorEl:document.getElementById("avatar"),open:a},ea.createElement(ca.i,{onClickAway:function(){return r("clickAway")}},ea.createElement(ca.G,null,t.first_name&&t.last_name&&ea.createElement("div",null,ea.createElement(ca.F,null,ea.createElement(ca.X,null,"Signed in as ",t.first_name," ",t.last_name)),ea.createElement(ca.o,null)),ea.createElement(ca.F,{onClick:function(){return r("profile")}},ea.createElement(ca.X,null,ea.createElement(va.a,{to:"/profile"},"My Profile"))),ea.createElement(ca.F,{onClick:function(){return r("logout")}},ea.createElement(ca.X,null,"Logout")))))},Ia=function(e){return e.AppState},xa=(Zt=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(i)))).state={open:!1,profileMenuOpen:!1},a.appLinks=[new Oa("Marketplace","/marketplace",ea.createElement(Ta.a,null)),new Oa("Data Explorer","/dataexplorer",ea.createElement(wa.a,null)),new Oa("News","https://medium.com/rebloc",ea.createElement(ja.a,null),"global"),new Oa("Order History","/order/history",ea.createElement(Ea.a,null))],a.userAppLinks=[new Oa("Profie","/profile",ea.createElement(_a.a,null))],a.handleDrawerOpen=function(){a.setState({open:!0})},a.handleDrawerClose=function(){a.setState({open:!1})},a.handleProfileMenuOpen=function(){a.props.actions.updateProfileMenuOpen(!0)},a}return Object(o.a)(t,e),Object(i.a)(t,[{key:"login",value:function(){this.props.auth.login()}},{key:"logout",value:function(){this.props.auth.logout()}},{key:"componentDidMount",value:function(){this.props.profile||this.props.actions.getProfile()}},{key:"handleProfileMenuClickAway",value:function(e){switch(console.log("handle profile menu click away"),console.log(e),e){case"clickAway":this.props.actions.updateProfileMenuOpen(!1);break;case"logout":this.logout(),this.props.actions.updateProfileMenuOpen(!1);break;case"profile":this.props.actions.updateProfileMenuOpen(!1)}}},{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.theme,r=this.state.open,i=this.props.auth.authenticated,s=localStorage.getItem("profile"),c="",o="";return"undefined"!==s&&null!=s&&((c=JSON.parse(s)).first_name&&(o+=c.first_name[0].toUpperCase()),c.last_name&&(o+=c.last_name[0].toUpperCase())),ea.createElement("div",{className:a.root},ea.createElement(ca.j,null),ea.createElement(ca.a,{className:a.appBar,position:"static"},ea.createElement(ca.V,{disableGutters:!r},i&&ea.createElement(ca.z,{color:"inherit","aria-label":"Open drawer",onClick:this.handleDrawerOpen,className:a.menuButton},ea.createElement(ua.a,null)),ea.createElement(va.a,{to:"/home"},ea.createElement("img",{src:ga.a,className:a.appLogo+" "+(i?"":a.marginLeft50)})),ea.createElement("div",{className:a.grow}),""!==c&&i&&ea.createElement("div",{className:a.avatar,onClick:this.handleProfileMenuOpen},ea.createElement(Da,{initial:o}))),ea.createElement(Ca,{open:this.props.profileMenuOpen,onClickAway:this.handleProfileMenuClickAway,profile:c})),ea.createElement(ca.p,{className:a.drawer,variant:"persistent",anchor:"left",open:r,classes:{paper:a.drawerPaper}},ea.createElement("div",{className:a.drawerHeader},ea.createElement(ca.z,{onClick:this.handleDrawerClose},"ltr"===n.direction?ea.createElement(ma.a,null):ea.createElement(ha.a,null))),ea.createElement(ca.o,null),ea.createElement(ca.C,null,this.appLinks.map(function(t,a){return ea.createElement(ea.Fragment,null,"app"==t.type&&ea.createElement(ca.D,{button:!0,key:"link-item".concat(a),onClick:e.handleDrawerClose,className:"app-link"},ea.createElement(va.a,{to:t.url},t.icon," ",ea.createElement("div",null,t.title))),"global"==t.type&&ea.createElement(ca.D,{button:!0,key:"link-item".concat(a),onClick:e.handleDrawerClose,className:"app-link"},ea.createElement("a",{href:t.url},t.icon," ",ea.createElement("div",null,t.title))))})),ea.createElement(ca.o,null),ea.createElement(ca.C,null,this.userAppLinks.map(function(t,a){return ea.createElement(ca.D,{button:!0,key:"link-item-user".concat(a),onClick:e.handleDrawerClose,className:"app-link"},ea.createElement(va.a,{to:t.url},t.icon," ",ea.createElement("div",null,t.title)))}))),ea.createElement("main",{className:a.content},ea.createElement("div",{className:a.drawerHeader})))}}]),t}(ea.Component),Object(ia.a)(Zt.prototype,"login",[ba.a],Object.getOwnPropertyDescriptor(Zt.prototype,"login"),Zt.prototype),Object(ia.a)(Zt.prototype,"logout",[ba.a],Object.getOwnPropertyDescriptor(Zt.prototype,"logout"),Zt.prototype),Object(ia.a)(Zt.prototype,"handleProfileMenuClickAway",[ba.a],Object.getOwnPropertyDescriptor(Zt.prototype,"handleProfileMenuClickAway"),Zt.prototype),Zt);var Pa,Fa=Object(oa.withStyles)(function(e){return{root:{display:"flex"},appBar:{transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),background:"#47494d"},marginLeft50:{marginLeft:"50px"},appLogo:{height:"26px"},appBarShift:{width:"calc(100% - ".concat(240,"px)"),marginLeft:240,transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen})},menuButton:{marginLeft:12,marginRight:20},hide:{display:"none"},grow:{flexGrow:1},drawer:{width:240,flexShrink:0},drawerPaper:{width:240},avatar:{marginRight:"50px"},content:{flexGrow:1,padding:3*e.spacing.unit,transition:e.transitions.create("margin",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),marginLeft:-240},contentShift:{transition:e.transitions.create("margin",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen}),marginLeft:0}}},{withTheme:!0})(Object(sa.b)(function(e){return{profileMenuOpen:Ia(e).profileMenuOpen,profile:dt(e)}},function(e){return{actions:Object(m.b)({getProfile:V,updateProfileMenuOpen:Xt},e)}})(xa)),Ra=a(7),La=a(144),Ma=a(106),Ua=a(42),Ga=a(66),Ha=a.n(Ga),Xa=a(334),Ba=a(335);function Va(e,t){switch(t.type){case Pa.REQUIRED:return""!=e&&void 0!=e;case Pa.LENGTH:return e.length==t.val;case Pa.MAX:return e<=t.val||void 0==e;case Pa.MIN:return e>=t.val||void 0==e;case Pa.MAX_LENGTH:return e.length<=t.val;case Pa.MIN_LENGTH:return e.length>=t.val;case Pa.GREATER_THAN:return e>t.val||void 0==e;case Pa.LESS_THAN:return e<t.val||void 0==e;case Pa.IS_URL:return a=e,new RegExp("^((ft|htt)ps?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%@_.~+&:]*)*(\\?[;&a-z\\d%@_.,~+&:=-]*)?(\\#[-a-z\\d_]*)?$","i").test(a)||void 0==e;case Pa.PATTERN:return t.val.test(e)}var a;return!0}!function(e){e.REQUIRED="REQUIRED",e.PATTERN="PATTERN",e.MIN="MIN",e.MAX_LENGTH="MAX_LENGTH",e.MIN_LENGTH="MIN_LENGTH",e.MAX="MAX",e.LENGTH="LENGTH",e.GREATER_THAN="GREATER_THAN",e.LESS_THAN="LESS_THAN",e.IS_URL="IS_URL"}(Pa||(Pa={}));var za=function(){function e(){Object(r.a)(this,e)}return Object(i.a)(e,[{key:"validate",value:function(e,t){var a={};return t.forEach(function(t){for(var n=e[t.fieldName],r=0;r<t.errors.length;r++)if(!Va(n,t.errors[r])){a[t.fieldName]=t.errorMessages[r];break}}),a}}]),e}(),Wa=function(e){var t=e.input,a=e.label,n=e.meta,r=e.custom,i=void 0!=n.error&&n.touched?n.error:r.helperText;return ta.a.createElement(ca.w,{item:!0,xs:r.gridXs,sm:r.gridSm},ta.a.createElement(ca.U,Object.assign({className:"basic-form-input",margin:"normal",variant:"outlined",label:a,disabled:r.disabled||!1,error:n.touched&&void 0!=n.error},t,{type:r.type||"text",fullWidth:!0,helperText:i})))},Ja=new za,qa=function(e){function t(){return Object(r.a)(this,t),Object(s.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return ta.a.createElement("form",{onSubmit:this.props.onSubmit},ta.a.createElement(ca.w,{spacing:24,container:!0},ta.a.createElement(Xa.a,{label:"First Name",component:Wa,name:"firstName",type:"text",custom:{helperText:"First Name",gridXs:12,gridSm:6}}),ta.a.createElement(Xa.a,{label:"Last Name",component:Wa,name:"lastName",type:"text",custom:{helperText:"Last Name",gridXs:12,gridSm:6}}),ta.a.createElement(Xa.a,{label:"Primary Email",component:Wa,name:"primaryEmail",type:"text",custom:{helperText:"Last Name",gridXs:12,gridSm:4,disabled:!0}}),ta.a.createElement(Xa.a,{label:"Secondary Email",component:Wa,name:"secondaryEmail",type:"text",custom:{helperText:"Secondary Email",gridXs:12,gridSm:4}}),ta.a.createElement(Xa.a,{label:"Phone",component:Wa,name:"phone",type:"text",custom:{helperText:"Phone",gridXs:12,gridSm:4}}),ta.a.createElement(Xa.a,{label:"Full Address",component:Wa,name:"address",type:"text",custom:{helperText:"Address",gridXs:12,gridSm:12}})))}}]),t}(ea.Component);qa=Object(Ba.a)({form:"profile",validate:function(e){return Ja.validate(e,[{fieldName:"firstName",errors:[{type:Pa.REQUIRED}],errorMessages:["First Name is required"]},{fieldName:"lastName",errors:[{type:Pa.REQUIRED}],errorMessages:["Last Name is required"]}])},destroyOnUnmount:!1})(qa);var Ya=Object(sa.b)(function(e){var t=dt(e),a=ht(e);return t?{initialValues:{firstName:t.first_name,lastName:t.last_name,primaryEmail:t.primary_email||a,secondaryEmail:t.secondary_email,phone:t.phone,address:t.address}}:{}})(qa),Ka=a(45),Qa=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(s.a)(this,Object(c.a)(t).call(this,e))).handleProfileSubmit=a.handleProfileSubmit.bind(Object(Ra.a)(Object(Ra.a)(a))),a}return Object(o.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.props.profile||this.props.getProfile()}},{key:"handleProfileSubmit",value:function(e){this.props.updateProfile(this.props.email,Object.assign({},e,{id:this.props.profile&&this.props.profile.id}),this.props.enqueueSnackbar)}},{key:"render",value:function(){var e=this.props.classes;return this.props.auth.authenticated?ea.createElement(ca.w,{container:!0,justify:"center"},ea.createElement("div",{className:e.container},ea.createElement(Ya,{onSubmit:this.handleProfileSubmit}),ea.createElement(ca.w,{item:!0,xs:12},ea.createElement(Ha.a,{color:"secondary",className:e.button,variant:"contained",onClick:this.props.submitProfileForm},"Save")))):ea.createElement(La.Redirect,{to:"/home"})}}]),t}(ea.Component);Qa=Object(Ka.withSnackbar)(Qa);var $a,Za=Object(oa.withStyles)(function(e){return Object(oa.createStyles)({container:{display:"flex",width:"80%",marginTop:"30px",flexWrap:"wrap"},textField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit},dense:{marginTop:16},menu:{width:200},wrapper:{width:"80%",display:"flex"}})},{withTheme:!0})(Object(sa.b)(function(e,t){return{profile:dt(e),email:ht(e)}},function(e){return{getProfile:function(){return e(V())},updateProfile:function(t,a,n){return e(function(e,t,a){return{type:U.UPDATE_PROFILE,email:e,profile:t,notify:a}}(t,a,n))},submitProfileForm:function(){return e(Object(Ua.b)("profile"))}}})(Qa)),en=a(108),tn=a.n(en),an=function(e){var t=e.source;return ea.createElement(ca.d,null,ea.createElement(ca.e,null,ea.createElement(ca.X,{component:"h5"},t.table_name)))},nn=function(e){function t(){return Object(r.a)(this,t),Object(s.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return ea.createElement("div",null,ea.createElement(tn.a,{container:!0,spacing:8,justify:"flex-start",direction:"row"},""!==this.props.datasetNames[0].table_name&&this.props.datasetNames.map(function(e){return ea.createElement(tn.a,{item:!0,xs:6,key:e.table_name},ea.createElement(an,{source:e}))})))}}]),t}(ea.Component),rn=(Object(oa.withStyles)(function(e){return{root:{width:300,left:400,backgroundColor:"lightblue"}}})(nn),a(347)),sn=a(348),cn=a(207),on=a(208),ln=a(349),un=(a(329),a(330),a(331),a(801),function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(s.a)(this,Object(c.a)(t).call(this,e))).state={pendingSearch:!1,selectedSet:null,visible:!1,sortKey:"",sortOrder:null,sortField:"",layout:"list",datasets:[],datasetSize:0},a.itemTemplate=a.itemTemplate.bind(Object(Ra.a)(Object(Ra.a)(a))),a.onSortChange=a.onSortChange.bind(Object(Ra.a)(Object(Ra.a)(a))),a.setToHid=a.setToHid.bind(Object(Ra.a)(Object(Ra.a)(a))),a}return Object(o.a)(t,e),Object(i.a)(t,[{key:"getDatasets",value:function(){var e=Object(f.a)(u.a.mark(function e(t){var a,n,r,i;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return"\n        query {\n            marketplace_data_source_detail {\n              id\n              name\n              description\n              num_of_records\n              date_created\n              date_modified\n              price_high\n              price_low\n              country\n              state_province\n              delivery_method\n              access_url\n            }\n          }",a=new Ma.GraphQLClient("http://demo-app.rebloc.io:8081/v1alpha1/graphql",{headers:{"X-Hasura-Access-Key":"3b177bc7c2484aba11a5277f5ce3aa3b884bbd19660e2a452eb1f593d9cf2587"}}),e.next=4,a.request("\n        query {\n            marketplace_data_source_detail {\n              id\n              name\n              description\n              num_of_records\n              date_created\n              date_modified\n              price_high\n              price_low\n              country\n              state_province\n              delivery_method\n              access_url\n            }\n          }");case 4:if(void 0!=(n=e.sent).marketplace_data_source_detail)for(r=n.marketplace_data_source_detail,t.datasetSize=r.length,i=0;i<r.length;i++)t.datasets.push(r[i]);this.forceUpdate();case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.getDatasets(this.state)}},{key:"renderListItem",value:function(e){var t=this;return null!=e?ea.createElement("div",{className:"p-col-12",style:{padding:"2em",borderBottom:"1px solid #d9d9d9"}},ea.createElement("div",{className:"p-col-12 p-md-8 car-details"},ea.createElement("div",{className:"p-grid"},ea.createElement("div",{className:"p-col-2 p-sm-6"},"ID:"),ea.createElement("div",{className:"p-col-10 p-sm-6"},e.id),ea.createElement("div",{className:"p-col-2 p-sm-6"},"Name:"),ea.createElement("div",{className:"p-col-10 p-sm-6"},e.name),ea.createElement("div",{className:"p-col-2 p-sm-6"},"Description:"),ea.createElement("div",{className:"p-col-10 p-sm-6"},e.description),ea.createElement("div",{className:"p-col-2 p-sm-6"},"No of Records:"),ea.createElement("div",{className:"p-col-10 p-sm-6"},e.num_of_records),ea.createElement("div",{className:"p-col-2 p-sm-6"},"Region:"),ea.createElement("div",{className:"p-col-10 p-sm-6"},e.state_province),ea.createElement("div",{className:"p-col-2 p-sm-6"},"Country"),ea.createElement("div",{className:"p-col-10 p-sm-6"},e.country))),ea.createElement("div",{className:"p-col-12 p-md-1 search-icon",style:{marginTop:"40px"}},ea.createElement(on.Button,{icon:"pi pi-search",onClick:function(a){return t.setState({selectedSet:e,visible:!0})}}))):ea.createElement("div",null)}},{key:"onSortChange",value:function(e){var t=e.value;0===t.indexOf("!")?this.setState({sortOrder:-1,sortField:t.substring(1,t.length),sortKey:t}):this.setState({sortOrder:1,sortField:t,sortKey:t})}},{key:"renderGridItem",value:function(e){var t=this;return null!=e?ea.createElement("div",{style:{padding:".5em"},className:"p-col-12 p-md-3"},ea.createElement(sn.Panel,{header:e.id,style:{textAlign:"center"}},ea.createElement("div",{className:"ddataset-name"},e.name),ea.createElement("div",{className:"ddataset-detail"},e.description),ea.createElement("div",{className:"ddataset-records"},e.num_of_records),ea.createElement("div",{className:"ddataset-region"},e.state_province),ea.createElement("div",{className:"ddataset-country"},e.country),ea.createElement("hr",{className:"ui-widget-content",style:{borderTop:0}}),ea.createElement(on.Button,{icon:"pi pi-search",onClick:function(a){return t.setState({selectedSet:e,visible:!0})}}))):ea.createElement("div",null)}},{key:"itemTemplate",value:function(e,t){return"grid"===t?this.renderGridItem(e):this.renderListItem(e)}},{key:"renderDatasetDialogContent",value:function(){return this.state.selectedSet?ea.createElement("div",{className:"p-grid",style:{fontSize:"16px",textAlign:"center",padding:"20px"}},ea.createElement("div",{className:"p-col-4"},"ID: "),ea.createElement("div",{className:"p-col-8"},this.state.selectedSet.id),ea.createElement("div",{className:"p-col-4"},"Name: "),ea.createElement("div",{className:"p-col-8"},this.state.selectedSet.name),ea.createElement("div",{className:"p-col-4"},"Delivery Method: "),ea.createElement("div",{className:"p-col-8"},this.state.selectedSet.delivery_method),ea.createElement("div",{className:"p-col-4"},"Number of Records: "),ea.createElement("div",{className:"p-col-8"},this.state.selectedSet.num_of_records),ea.createElement("div",{className:"p-col-4"},"Region: "),ea.createElement("div",{className:"p-col-8"},this.state.selectedSet.state_province),ea.createElement("div",{className:"p-col-4"},"Price Range: "),ea.createElement("div",{className:"p-col-8"},this.state.selectedSet.price_low," - ",this.state.selectedSet.price_high),ea.createElement("div",{className:"p-col-4"},"Date Created: "),ea.createElement("div",{className:"p-col-8"},this.state.selectedSet.date_created),ea.createElement("div",{className:"p-col-4"},"Last Modified Date: "),ea.createElement("div",{className:"p-col-8"},this.state.selectedSet.date_modified),ea.createElement("div",{className:"p-col-4"},"Access URL: "),ea.createElement("div",{className:"p-col-8"},this.state.selectedSet.access_url)):ea.createElement("div",null,ea.createElement("h3",null," No Info "))}},{key:"renderHeader",value:function(){var e=this;return ea.createElement("div",{className:"p-grid"},ea.createElement("div",{className:"p-col-6",style:{textAlign:"left"}},ea.createElement(ln.Dropdown,{options:[{label:"Newest First",value:"!date_created"},{label:"Oldest First",value:"date_created"},{label:"name",value:"name"}],value:this.state.sortKey,placeholder:"Sort By",onChange:this.onSortChange})),ea.createElement("div",{className:"p-col-6",style:{textAlign:"right"}},ea.createElement(cn.DataViewLayoutOptions,{layout:this.state.layout,onChange:function(t){return e.setState({layout:t.value})}})))}},{key:"setToHid",value:function(){this.setState({visible:!1})}},{key:"render",value:function(){var e=this.renderHeader();return ea.createElement("div",null,ea.createElement("div",null,ea.createElement(Fa,Object.assign({auth:this.props.auth},this.props))),ea.createElement("div",{className:"content-section introduction"},ea.createElement("div",{className:"feature-intro"},ea.createElement("h1",null,"Dataset Listing"))),ea.createElement("div",{className:"content-section implementation"},ea.createElement(cn.DataView,{value:this.state.datasets,layout:this.state.layout,header:e,itemTemplate:this.itemTemplate,paginatorPosition:"both",paginator:!0,rows:5,sortOrder:this.state.sortOrder,sortField:this.state.sortField}),ea.createElement(rn.Dialog,{header:"Dataset Details",visible:this.state.visible,modal:!0,onHide:this.setToHid},this.renderDatasetDialogContent())))}}]),t}(ea.Component)),pn=a(837),mn=function(e){return ta.a.createElement(pn.a,{to:"/home"})},dn=a(78),hn=(a(804),a(201),function(e){var t=e.title,a=e.content,n=e.buttonText,r=void 0===n?"":n,i=e.handleClick,s=void 0===i?function(){}:i,c=e.hideCta,o=void 0!==c&&c;return ea.createElement(ca.w,{container:!0,justify:"center"},ea.createElement(ca.I,{className:"jumbo-paper",elevation:1},ea.createElement(ca.w,{item:!0,xs:12},ea.createElement(ca.X,{variant:"h4",className:"jumbo-title"},t)),ea.createElement(ca.w,{item:!0,xs:12},ea.createElement(ca.X,{variant:"h6",className:"jumbo-title"},a)),!o&&ea.createElement(ca.c,{className:"jumbo-button",onClick:s},r)))}),fn=a(70),En=Object(fn.a)(),bn=($a=function(e){function t(){return Object(r.a)(this,t),Object(s.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(i.a)(t,[{key:"login",value:function(){this.props.auth.login()}},{key:"logout",value:function(){this.props.auth.logout()}},{key:"componentWillMount",value:function(){this.props.getProfile()}},{key:"componentDidMount",value:function(){!function(){var e=new dn.TimelineMax({repeat:-1,delay:3,repeatDelay:4});function t(){window.innerWidth>991?e.restart():e.kill()}e.from(".outlines",4,{width:"0px",height:"0px",autoAlpha:0,ease:dn.Linear.easeNone}).to(".outlines",4,{autoAlpha:0,ease:dn.Linear.easeNone}),new dn.TimelineMax({repeat:-1,repeatDelay:0}).to(".h-animation",24,{x:"-250px",y:"-350px",force3D:!0,rotation:.01,ease:dn.Linear.easeNone}).to(".h-animation",24,{x:"0px",y:"0px",force3D:!0,rotation:.01,ease:dn.Linear.easeNone}),t(),window.addEventListener("resize",t,!1)}()}},{key:"navToProfile",value:function(){En.push("/profile")}},{key:"navToMarketplace",value:function(){En.push("/marketplace")}},{key:"renderJumboPaper",value:function(){return!this.props.isProfileSet&&this.props.auth.authenticated?ta.a.createElement(hn,{title:"Welcome to ReBloc,",content:"Please create a profile to continue.",handleClick:this.navToProfile,buttonText:"Create Profile"}):this.props.isProfileSet&&this.props.auth.authenticated?ta.a.createElement(hn,{title:"Welcome back to ReBloc, ".concat(this.props.profile.first_name," ").concat(this.props.profile.last_name),content:"Please visit the marketplace.",handleClick:this.navToMarketplace,buttonText:"Go To The Marketplace"}):void 0}},{key:"render",value:function(){var e=this.props.auth.authenticated;return ta.a.createElement("div",null,!e&&ta.a.createElement("section",{className:"top"},ta.a.createElement("div",{className:"h-animation"},ta.a.createElement("div",{className:"cover",style:{background:"../img/city_background_op.jpg"}}),ta.a.createElement("div",{className:"outlines",id:"glow",style:{visibility:"hidden"}})),ta.a.createElement("div",{className:"container"},ta.a.createElement("div",{className:"row"},ta.a.createElement("div",{className:"col-md-12 text-center wow fadeInUp"},ta.a.createElement("h1",{className:"text-center"},"Democratizing Real Estate Data"),ta.a.createElement("h3",{className:"text-center"},"ReBloc enables all stakeholders to seamlessly and securely buy and sell data."),ta.a.createElement("a",{href:"#problem",className:"btn btn-orange",onClick:this.login},"Login"))))),this.renderJumboPaper())}}]),t}(ta.a.Component),Object(ia.a)($a.prototype,"login",[ba.a],Object.getOwnPropertyDescriptor($a.prototype,"login"),$a.prototype),Object(ia.a)($a.prototype,"logout",[ba.a],Object.getOwnPropertyDescriptor($a.prototype,"logout"),$a.prototype),$a);var vn=Object(sa.b)(function(e){return{profile:dt(e),isProfileSet:bt(e)}},function(e){return{getProfile:function(){return e(V())}}})(bn),On=a(838),yn=function(e){var t=e.children,a=e.type;return ea.createElement("div",{className:"notification-label notification-"+a},t)},gn=function(e){function t(e){return Object(r.a)(this,t),Object(s.a)(this,Object(c.a)(t).call(this,e))}return Object(o.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return ea.createElement(ea.Fragment,null,ea.createElement(ca.w,{container:!0,justify:"center"},ea.createElement(ca.w,{item:!0,xs:8},ea.createElement(yn,{type:"warning"},ea.createElement("p",null,"This page is under construction")))))}}]),t}(ea.Component);gn=Object(Ka.withSnackbar)(gn);var Sn,_n=Object(On.a)(gn),Dn=Object(sa.b)(function(e){return{}},function(e){return{actions:Object(m.b)({},e)}})(_n),An=a(835),Tn=a(834),kn=a(839),jn={domain:"rebloc.auth0.com",clientId:"fnLCIbVoycyrbNwmip5aWFLEtAyfdSYF",callbackUrl:"https://localhost:3000/callback"},Nn=a(351),wn=function(){function e(){Object(r.a)(this,e)}return Object(i.a)(e,null,[{key:"getInstance",value:function(){return e.instance||(e.instance=new Nn.EventEmitter),e.instance}}]),e}();wn.instance=void 0;var Cn,In=(Sn=function(){function e(){Object(r.a)(this,e),this.auth0=new La.WebAuth({domain:jn.domain,clientID:jn.clientId,redirectUri:jn.callbackUrl,audience:"https://".concat(jn.domain,"/userinfo"),responseType:"token id_token",scope:"openid openid profile email"})}return Object(i.a)(e,[{key:"login",value:function(){this.auth0.authorize()}},{key:"handleAuthentication",value:function(){var e=this;this.auth0.parseHash({},function(t,a){a&&a.accessToken&&a.idToken?(e.setSession(a),wn.getInstance().emit("authenticated")):t&&(En.push("/home"),console.error(t))})}},{key:"findUser",value:function(){var e=Object(f.a)(u.a.mark(function e(t){var a,n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=new Y,e.next=3,a.getProfile(t);case 3:n=e.sent,localStorage.setItem("profile",JSON.stringify(n)),$t.getInstance().store.dispatch({type:U.GET_PROFILE});case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"setSession",value:function(e){var t=e.accessToken,a=e.expiresIn,n=e.idToken,r=e.idTokenPayload,i=JSON.stringify(1e3*a+(new Date).getTime());localStorage.setItem("access_token",t),localStorage.setItem("id_token",n),localStorage.setItem("expires_at",i),localStorage.setItem("email",r.email),localStorage.setItem("authenticated","true"),localStorage.setItem("idTokenPayload",JSON.stringify(r)),localStorage.setItem("pendingProfileQuery","n"),this.findUser(r.email),En.push("/home")}},{key:"logout",value:function(){var e;localStorage.removeItem("access_token"),localStorage.removeItem("id_token"),localStorage.removeItem("expires_at"),localStorage.removeItem("email"),localStorage.removeItem("authenticated"),localStorage.removeItem("profile"),localStorage.removeItem("pendingProfileQuery"),En.push("/home");var t=location.protocol+"//"+location.hostname+":3000";e="https://rebloc.auth0.com/v2/logout?returnTo=".concat(t),window.location.replace(e)}},{key:"isUserVerified",get:function(){var e=JSON.parse(localStorage.getItem("profile"));return!!e&&1==e.primary_email_verified}},{key:"authenticated",get:function(){var e=JSON.parse(localStorage.getItem("expires_at"));return(new Date).getTime()<e}}]),e}(),Object(ia.a)(Sn.prototype,"login",[ba.a],Object.getOwnPropertyDescriptor(Sn.prototype,"login"),Sn.prototype),Object(ia.a)(Sn.prototype,"handleAuthentication",[ba.a],Object.getOwnPropertyDescriptor(Sn.prototype,"handleAuthentication"),Sn.prototype),Object(ia.a)(Sn.prototype,"findUser",[ba.a],Object.getOwnPropertyDescriptor(Sn.prototype,"findUser"),Sn.prototype),Object(ia.a)(Sn.prototype,"setSession",[ba.a],Object.getOwnPropertyDescriptor(Sn.prototype,"setSession"),Sn.prototype),Object(ia.a)(Sn.prototype,"logout",[ba.a],Object.getOwnPropertyDescriptor(Sn.prototype,"logout"),Sn.prototype),Sn),xn=function(e){var t=e.wizardSteps,a=e.currentStep;return ea.createElement("div",null,ea.createElement(ca.x,{xsDown:!0},ea.createElement(ca.M,{activeStep:a,className:"stepper"},t.map(function(e){return ea.createElement(ca.K,{color:"secondary",key:e.label,completed:e.completed},ea.createElement(ca.L,null,e.label))}))))},Pn=(a(332),function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(s.a)(this,Object(c.a)(t).call(this,e))).state=void 0,a.state={value:""},a}return Object(o.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return ea.createElement(ca.w,{container:!0,justify:"center"},ea.createElement("div",{className:"wizard-wrapper"},ea.createElement(xn,{wizardSteps:this.props.steps,currentStep:this.props.currentStep}),this.props.children.map(function(t,a,n){if(a==e.props.currentStep)return n[a]})))}}]),t}(ea.Component));!function(e){e[e.SCHEMA_UPLOADED=1]="SCHEMA_UPLOADED",e[e.SAVED=2]="SAVED",e[e.PUBLISHED=3]="PUBLISHED"}(Cn||(Cn={}));var Fn=function(e){return e.DatasetInfoState.dataset},Rn=function(e){return e.DatasetInfoState.schema},Ln=function(e){return e.DatasetInfoState},Mn=Object(mt.a)([Fn],function(e){return e.stage==Cn.PUBLISHED}),Un=Object(mt.a)([Fn,dt],function(e,t){return!!t&&(!!t.id&&e.dataset_owner_id==t.id)}),Gn=Object(mt.a)([Fn,Rn,Un],function(e,t,a){return!!a&&(!!function(e,t){for(var a=0;a<e.length;a++){var n=t[e[a]];if(void 0==n||null==n||""==n)return!1}return!0}(["name","description","access_url","api_key","enc_data_key","search_terms","price_high","num_of_records","country","state_province"],e)&&!!t.length)}),Hn=a(71),Xn=a.n(Hn),Bn=function(e){var t=e.input,a=e.label,n=e.meta,r=e.custom,i=void 0!=n.error&&n.touched?n.error:r.helperText;return ta.a.createElement(ca.w,{item:!0,xs:r.gridXs,sm:r.gridSm},ta.a.createElement(ca.U,Object.assign({className:"basic-form-input",margin:"normal",variant:"standard",label:a,disabled:r.disabled||!1,onChange:r.onChange,select:!0,error:n.touched&&void 0!=n.error},t,{fullWidth:!0,helperText:i}),r.options.map(function(e,t){return ta.a.createElement(ca.F,{key:"".concat(e.value).concat(t),value:e.value},e.label)})))},Vn=function(e){var t=e.input,a=e.label,n=e.meta,r=e.custom,i=void 0!=n.error&&n.touched?n.error:r.helperText;return ta.a.createElement(ca.w,{item:!0,xs:r.gridXs,sm:r.gridSm},ta.a.createElement(ca.U,Object.assign({className:"basic-form-input",margin:"normal",variant:"standard",placeholder:r.placeholder,label:a,error:n.touched&&void 0!=n.error},t,{type:r.type||"text",fullWidth:!0,helperText:i})))},zn=new za,Wn=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:12;return"card"!=e?t:a},Jn=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(s.a)(this,Object(c.a)(t).call(this,e))).onCountrySelect=function(e){console.log("On Country Select"),console.log(e),a.setState({stateSuggestions:Xn.a.getStatesOfCountry(e.id)})},a.mapTopics=function(e){return{label:e.name,value:e.description}},a.mapStates=function(e){return{label:e.name,value:e}},a.mapCountries=function(e){return{label:e.name,value:e}},a.state={countrySuggestions:[],stateSuggestions:[],citySuggestions:[]},a}return Object(o.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.setState({countrySuggestions:Xn.a.getAllCountries()})}},{key:"render",value:function(){return ta.a.createElement("form",{onSubmit:this.props.handleSubmit,autoComplete:"off",className:"card"==this.props.mode?"card-mode":""},ta.a.createElement(ca.w,{spacing:24,container:!0},ta.a.createElement(Xa.a,{label:"Name(Required)",component:Vn,name:"name",type:"text",custom:{gridXs:12,gridSm:Wn(this.props.mode,6),placeholder:"Name of the dataset"}}),ta.a.createElement(Xa.a,{label:"Description(Required)",component:Vn,name:"description",type:"text",custom:{gridXs:12,gridSm:Wn(this.props.mode,6),placeholder:"Description about the dataset"}}),ta.a.createElement(Xa.a,{label:"Search Terms",component:Vn,name:"search_terms",type:"text",custom:{gridXs:12,gridSm:Wn(this.props.mode,4),placeholder:"Term1,Term2,Term3"}}),ta.a.createElement(Xa.a,{label:"Category",component:Bn,name:"topic",custom:{gridXs:12,gridSm:Wn(this.props.mode,4,4),options:this.props.topics.map(this.mapTopics)}}),ta.a.createElement(Xa.a,{label:"Endpoint",component:Vn,name:"access_url",type:"text",custom:{gridXs:12,gridSm:8,placeholder:"http://{DATASET ENDPOINT}"}}),ta.a.createElement(Xa.a,{label:"Country",component:Bn,name:"country",custom:{gridXs:12,onChange:this.onCountrySelect,gridSm:Wn(this.props.mode,4,4),options:this.state.countrySuggestions.map(this.mapCountries),disabled:!(this.state.countrySuggestions.length>0)}}),ta.a.createElement(Xa.a,{label:"State",component:Bn,name:"state_province",custom:{gridXs:12,gridSm:Wn(this.props.mode,4,4),options:this.state.stateSuggestions.map(this.mapStates),disabled:!(this.state.stateSuggestions.length>0)}}),ta.a.createElement(Xa.a,{label:"Sample Api Key",component:Vn,name:"api_key",type:"text",custom:{gridXs:12,gridSm:6,placeholder:"Provide a sample API key"}}),ta.a.createElement(Xa.a,{label:"Sample Data Key",component:Vn,name:"enc_data_key",type:"text",custom:{gridXs:12,gridSm:6,placeholder:"Provide a sample access data key"}}),ta.a.createElement(Xa.a,{label:"# of records",component:Vn,name:"num_of_records",type:"number",custom:{gridXs:12,gridSm:6,type:"number",placeholder:"Total Amount Of Records"}}),ta.a.createElement(Xa.a,{label:"Asking Price",component:Vn,name:"price_high",type:"number",custom:{gridXs:12,gridSm:6,type:"number",placeholder:"Asking Price"}})))}}]),t}(ea.Component);Jn=Object(Ba.a)({form:"contact",validate:function(e){return zn.validate(e,[{fieldName:"name",errors:[{type:Pa.REQUIRED}],errorMessages:["Name is required"]},{fieldName:"description",errors:[{type:Pa.REQUIRED}],errorMessages:["Description is required"]},{fieldName:"num_of_records",errors:[{type:Pa.GREATER_THAN,val:0}],errorMessages:["Please ensure that the number of records are greater than 0"]},{fieldName:"price_high",errors:[{type:Pa.MIN,val:0}],errorMessages:["Please enter a positive asking price"]},{fieldName:"access_url",errors:[{type:Pa.IS_URL}],errorMessages:["Please enter a valid endpoint"]}])},destroyOnUnmount:!0,enableReinitialize:!0})(Jn);var qn=Object(sa.b)(function(e,t){var a;return"edit"==t.mode&&(a=Fn(e)),a?{initialValues:{name:a.name,description:a.description,search_terms:a.search_terms,country:a.country,state_province:a.state_province,api_key:a.api_key,enc_data_key:a.enc_data_key,access_url:a.access_url,num_of_records:a.num_of_records,price_high:a.price_high,price_low:a.price_low}}:{}})(Jn),Yn=a(352),Kn=a.n(Yn),Qn=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(s.a)(this,Object(c.a)(t).call(this,e))).handleFileChange=a.handleFileChange.bind(Object(Ra.a)(Object(Ra.a)(a))),a.upload=a.upload.bind(Object(Ra.a)(Object(Ra.a)(a))),a.handleDrop=a.handleDrop.bind(Object(Ra.a)(Object(Ra.a)(a))),a}return Object(o.a)(t,e),Object(i.a)(t,[{key:"handleFileChange",value:function(){var e=document.getElementById(this.props.fileId);if(e){var t=e.files[0];this.props.onFileChange(this.props.fileId,t)}}},{key:"handleDragOver",value:function(e){e.preventDefault(),e.stopPropagation()}},{key:"handleDrop",value:function(e){e.preventDefault(),e.stopPropagation();var t=e.dataTransfer.files[0];this.props.fileTypes.find(function(e){return t.type==e})?this.props.onFileChange(this.props.fileId,t):this.props.onFileTypeMismatch(t.type)}},{key:"upload",value:function(){var e=Object(f.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.props.upload(this.props.fileId);case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return ea.createElement("div",{className:"drop-zone",onDrop:this.handleDrop,onDragOver:this.handleDragOver},ea.createElement(ca.w,{item:!0,xs:12},ea.createElement(ca.y,{fontSize:"large"},ea.createElement(Kn.a,{className:"upload-icon"}))),ea.createElement(ca.w,{item:!0,xs:12},ea.createElement(ca.X,null,"Drag And Drop Files Here To Upload")),ea.createElement("label",{htmlFor:this.props.fileId,className:"file-input-label"},ea.createElement(ca.X,null,"Or Select A File To Upload")),ea.createElement("input",{className:"file-input",type:"file",id:this.props.fileId,name:this.props.fileId,onChange:this.handleFileChange,accept:this.props.fileTypes.join(",")}),this.props.displayUpload&&ea.createElement("button",{type:"button",onClick:this.upload},"Upload"))}}]),t}(ea.Component),$n=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(s.a)(this,Object(c.a)(t).call(this,e))).onFileChange=a.onFileChange.bind(Object(Ra.a)(Object(Ra.a)(a))),a.upload=a.upload.bind(Object(Ra.a)(Object(Ra.a)(a))),a.renderFileContent=a.renderFileContent.bind(Object(Ra.a)(Object(Ra.a)(a))),a.renderFileUpload=a.renderFileUpload.bind(Object(Ra.a)(Object(Ra.a)(a))),a.onFileTypeMismatch=a.onFileTypeMismatch.bind(Object(Ra.a)(Object(Ra.a)(a))),a}return Object(o.a)(t,e),Object(i.a)(t,[{key:"onFileChange",value:function(e,t){this.props.onSchemaFileChange(e,t)}},{key:"onFileTypeMismatch",value:function(){}},{key:"upload",value:function(e){this.props.onSchemaUpload(e)}},{key:"renderErrors",value:function(e){return ea.createElement("div",null,e.map(function(e,t){return ea.createElement(yn,{key:"notification-"+t,type:"error"},ea.createElement("strong",null,"ERROR "),e.dataPath," ",e.message," ",JSON.stringify(e.params))}))}},{key:"renderFileUpload",value:function(){return ea.createElement(ca.w,{item:!0,xs:12,className:"text-center"},ea.createElement(Qn,{fileId:"schemaFile",onFileChange:this.onFileChange,upload:this.upload,displayUpload:!1,fileTypes:[".json","application/json"],onFileTypeMismatch:this.onFileTypeMismatch}))}},{key:"renderFileContent",value:function(){if(this.props.schemaFile)return this.props.errors?this.renderErrors(this.props.errors):this.props.schemaFile&&this.props.schema.length?ea.createElement(yn,{type:"success"},"File is valid, and it passes all validation checks"):void 0}},{key:"renderNoSchemaError",value:function(){if(this.props.displayNoSchemaError)return ea.createElement(yn,{type:"error"},ea.createElement("strong",null,"ERROR ")," Schema is required, please upload a valid schema")}},{key:"render",value:function(){return ea.createElement(ca.w,{container:!0,justify:"center"},this.renderNoSchemaError(),this.renderFileContent(),(!this.props.schema.length||this.props.errors)&&this.renderFileUpload())}}]),t}(ea.Component),Zn=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(s.a)(this,Object(c.a)(t).call(this,e))).state={mode:"display"},a.handleSubmit=a.handleSubmit.bind(Object(Ra.a)(Object(Ra.a)(a))),a.handleBlur=a.handleBlur.bind(Object(Ra.a)(Object(Ra.a)(a))),a}return Object(o.a)(t,e),Object(i.a)(t,[{key:"handleSubmit",value:function(e){this.setState({mode:"display"}),this.props.handleSubmit(e)}},{key:"handleBlur",value:function(){this.setState({mode:"display"})}},{key:"render",value:function(){var e=this;return ea.createElement("div",null,"display"==this.state.mode&&ea.createElement("div",{onClick:function(){return e.setState({mode:"edit"})}},this.props.children),"edit"==this.state.mode&&ea.createElement("form",{onSubmit:function(t){return e.handleSubmit(t)}},ea.createElement(Xa.a,{name:"inlineField",component:"input",className:"inline-edit-form",onBlur:this.handleBlur,autoFocus:!0})))}}]),t}(ea.Component),er=Object(Ba.a)()(Zn),tr=new Map;tr.set("integer","#c4e2fb"),tr.set("text","#d2e9d0"),tr.set("boolean","#f8d7da");var ar=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(s.a)(this,Object(c.a)(t).call(this,e))).state={page:0,rowsPerPage:5},a.handlePageChange=a.handlePageChange.bind(Object(Ra.a)(Object(Ra.a)(a))),a.handleChangeRowsPerPage=a.handleChangeRowsPerPage.bind(Object(Ra.a)(Object(Ra.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(Ra.a)(Object(Ra.a)(a))),a}return Object(o.a)(t,e),Object(i.a)(t,[{key:"renderLabelField",value:function(e){var t={};return tr.has(e.type)&&(t.backgroundColor=tr.get(e.type)),ea.createElement(ca.W,{title:e.name},ea.createElement(ca.X,{style:t},e.label))}},{key:"renderTypeField",value:function(e){return ea.createElement(ca.X,{className:"type-field"},e.type)}},{key:"handlePageChange",value:function(e,t){this.setState({page:t})}},{key:"handleChangeRowsPerPage",value:function(e){this.setState({page:0,rowsPerPage:e.target.value})}},{key:"handleSubmit",value:function(e,t,a){this.props.onSchemaChange&&this.props.onSchemaChange(e.inlineField,a.field,a.index)}},{key:"render",value:function(){var e=this;return ea.createElement(ca.I,{className:"schema-dt"},ea.createElement(ca.V,null,ea.createElement(ca.X,{variant:"h6",className:"grow"},this.props.schemaName||"Schema")),ea.createElement(ca.N,{className:"table"},ea.createElement(ca.R,null,ea.createElement(ca.T,null,ea.createElement(ca.P,null," ",ea.createElement(ca.X,null,"Name")," "),ea.createElement(ca.P,null," ",ea.createElement(ca.X,null,"Type")," "),ea.createElement(ca.P,null," ",ea.createElement(ca.X,null,"Description")," "))),ea.createElement(ca.O,null,this.props.schemas.slice(this.state.page*this.state.rowsPerPage,this.state.page*this.state.rowsPerPage+this.state.rowsPerPage).map(function(t,a){return ea.createElement(ca.T,{key:"table-row".concat(a)},ea.createElement(ca.P,{align:"left"},e.props.canEdit&&ea.createElement(er,{form:"label".concat(a),id:"label".concat(a),initialValues:{inlineField:t.label},onSubmit:e.handleSubmit,index:a,field:"label"},e.renderLabelField(t)),!e.props.canEdit&&ea.createElement(ea.Fragment,null,e.renderLabelField(t))),ea.createElement(ca.P,{align:"left"},e.renderTypeField(t)),ea.createElement(ca.P,{align:"left"},e.props.canEdit&&ea.createElement(er,{form:"description".concat(a),id:"description".concat(a),initialValues:{inlineField:t.description},onSubmit:e.handleSubmit,index:a,field:"description"},ea.createElement(ca.W,{title:t.description},ea.createElement(ca.X,{className:"description-field"},t.description))),!e.props.canEdit&&ea.createElement(ca.W,{title:t.description},ea.createElement(ca.X,{className:"description-field"},t.description))))})),ea.createElement(ca.Q,{className:"table-footer"},ea.createElement(ca.T,null,ea.createElement(ca.S,{rowsPerPageOptions:[5,10,25],count:this.props.schemas.length,onChangePage:this.handlePageChange,onChangeRowsPerPage:this.handleChangeRowsPerPage,page:this.state.page,rowsPerPage:this.state.rowsPerPage})))))}}]),t}(ea.Component),nr=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(s.a)(this,Object(c.a)(t).call(this,e))).onWizardNext=a.onWizardNext.bind(Object(Ra.a)(Object(Ra.a)(a))),a.onWizardPrev=a.onWizardPrev.bind(Object(Ra.a)(Object(Ra.a)(a))),a.handleBasicFormSubmit=a.handleBasicFormSubmit.bind(Object(Ra.a)(Object(Ra.a)(a))),a.onSchemaFileChange=a.onSchemaFileChange.bind(Object(Ra.a)(Object(Ra.a)(a))),a.onSchemaUpload=a.onSchemaUpload.bind(Object(Ra.a)(Object(Ra.a)(a))),a.handleClose=a.handleClose.bind(Object(Ra.a)(Object(Ra.a)(a))),a.handleEnter=a.handleEnter.bind(Object(Ra.a)(Object(Ra.a)(a))),a.cleanup=a.cleanup.bind(Object(Ra.a)(Object(Ra.a)(a))),a}return Object(o.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.props.actions.getTopics()}},{key:"onSchemaFileChange",value:function(e,t){this.props.displaySchemaError&&this.props.actions.changeDisplaySchemaError(!1),this.props.onFileChangeAndUpload(t,e)}},{key:"onSchemaUpload",value:function(e){this.props.onFileUpload(e)}},{key:"onWizardNext",value:function(){switch(this.props.wizard.currentStep){case 2:return void this.props.actions.submit("contact");case 0:if(!this.props.schema.length)return void this.props.actions.changeDisplaySchemaError(!0);break;case 3:return void this.publish()}this.props.actions.nextStep()}},{key:"publish",value:function(){this.props.actions.saveDatasetForm(this.props.basicInfo,this.props.schema,this.props.profile.id,Cn.SAVED,this.props.schemaName)}},{key:"onWizardPrev",value:function(){this.props.actions.prevStep()}},{key:"handleBasicFormSubmit",value:function(e){this.publish()}},{key:"renderTitle",value:function(e){return e?ea.createElement("span",null,e):ea.createElement("span",null,"Next")}},{key:"handleClose",value:function(){this.props.actions.changeDialogState(!1)}},{key:"cleanup",value:function(){this.props.actions.resetForm(),this.props.actions.destroy("contact")}},{key:"handleEnter",value:function(){if(this.props.datasetDialog.dataset){var e=Object.assign({},this.props.datasetDialog.dataset);Array.isArray(e.search_terms)&&(e.search_terms=e.search_terms.join(",")),this.props.actions.updateDatasetForm(e)}}},{key:"renderBasicInfoForm",value:function(){return ea.createElement(qn,{onSubmit:this.handleBasicFormSubmit,topics:this.props.topics})}},{key:"renderSchemaUpload",value:function(){return ea.createElement($n,{onSchemaFileChange:this.onSchemaFileChange,onSchemaUpload:this.onSchemaUpload,schemaFile:this.props.schemaFile,errors:this.props.schemaFile.errors,schema:this.props.schema,displayNoSchemaError:this.props.displaySchemaError})}},{key:"renderSchemaList",value:function(){return ea.createElement(ar,{schemas:this.props.schema,schemaName:this.props.schemaName})}},{key:"renderWizard",value:function(){if("add"==this.props.datasetDialog.mode)return ea.createElement(Pn,{steps:this.props.steps,onNext:this.onWizardNext,onPrev:this.onWizardPrev,currentStep:this.props.wizard.currentStep},this.renderSchemaUpload(),this.renderSchemaList(),this.renderBasicInfoForm())}},{key:"renderWizardNextButton",value:function(e,t,a,n){if((e!=t-1||e==t-1&&a)&&"add"==n)return ea.createElement(ca.c,{onClick:this.onWizardNext,variant:"contained",color:"secondary",className:"wizard-button"},this.renderTitle(this.props.steps[this.props.wizard.currentStep].nextButtonValue))}},{key:"renderDialogTitle",value:function(){if("add"==this.props.datasetDialog.mode)return ea.createElement(ca.n,null,ea.createElement("p",{className:"dialog-header"},ea.createElement("span",{className:"bold"},"CREATE")," A DATASET"),ea.createElement("p",{className:"dialog-subheader"},"Fill out this form to publish a new dataset to the marketplace."))}},{key:"render",value:function(){return ea.createElement("div",null,ea.createElement(ca.k,{open:this.props.datasetDialog.open,fullWidth:!0,maxWidth:"md",onEnter:this.handleEnter,onExited:this.cleanup,onClose:this.handleClose},this.renderDialogTitle(),ea.createElement(ca.m,null,ea.createElement(ca.w,{container:!0},this.renderWizard())),ea.createElement(ca.l,null,ea.createElement(ca.w,{container:!0,justify:"flex-end"},0!=this.props.wizard.currentStep&&ea.createElement(ca.c,{onClick:this.onWizardPrev,variant:"contained",color:"secondary",className:"wizard-button"},"Previous"),this.renderWizardNextButton(this.props.wizard.cuurentStep,this.props.steps.length,this.props.datasetForm.datasetPublished,this.props.datasetDialog.mode),ea.createElement(ca.c,{onClick:this.handleClose,className:"cancel-btn"},"Cancel")))))}}]),t}(ea.Component),rr=Object(On.a)(nr),ir=function(e){var t=e.onSchemaFilterChange,a=e.schemaFilter,n=e.toolbarOptions,r=e.hasPublish,i=e.onSave,s=void 0===i?function(){}:i,c=e.onPublish,o=void 0===c?function(){}:c,l=e.unPublish,u=void 0===l?function(){}:l,p=e.canPublish,m=void 0!==p&&p,d=e.isPublished,h=void 0!==d&&d;return ea.createElement(ca.V,{className:"marketplace-toolbar"},ea.createElement(ca.x,{xsDown:!0},ea.createElement("div",{className:"filter-container"},n.map(function(e,n){return ea.createElement(ca.c,{onClick:function(){return a=e.value,void t(a);var a},key:"toolbarOption".concat(n)},a==e.value&&ea.createElement("strong",null,e.label),a!=e.value&&ea.createElement("span",null,e.label))}))),ea.createElement(ca.x,{smUp:!0},ea.createElement(ca.t,{className:"filter-container"},ea.createElement(ca.J,{value:a,onChange:function(e){t(e.target.value)}},n.map(function(e,t){return ea.createElement(ca.F,{key:"toolbarSelectOption".concat(t),value:e.value},e.label)})))),r&&!h&&ea.createElement(ea.Fragment,null,ea.createElement(ca.c,{className:"toolbar-btn",variant:"outlined",color:"secondary",onClick:s},"Save"),ea.createElement(ca.c,{className:"toolbar-btn",variant:"contained",color:"secondary",disabled:!m,onClick:o},"Publish")),r&&h&&ea.createElement(ea.Fragment,null,ea.createElement(ca.c,{className:"toolbar-btn",variant:"contained",color:"secondary",onClick:u},"UnPublish")))},sr=function e(t,a){Object(r.a)(this,e),this.label=void 0,this.value=void 0,this.label=t,this.value=a},cr=(a(811),a(354)),or=a.n(cr),lr=a(353),ur=a.n(lr),pr=function(e){var t=e.dataset,a=e.isMoreOptionsOpened,n=e.onMoreOptions,r=e.onBuy,i=(e.onGetSampleData,e.handleSendEmail),s=e.user,c=function(){var e=Object(f.a)(u.a.mark(function e(a){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r(a,t,s);case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}();return ea.createElement(ca.d,null,ea.createElement(ca.f,{title:t.name,subheader:t.description,avatar:ea.createElement(ca.b,null," ",ea.createElement(_a.a,null)),action:ea.createElement("div",{id:"card-more-options"},ea.createElement(or.a,{onClick:function(){n(!0)}}))}),ea.createElement(ca.e,null,ea.createElement(ca.X,{className:"card-content-title"},"Dataset Information"),ea.createElement(ca.X,{className:"card-content-sub-title"},"Delivery Method"),ea.createElement(ca.X,{className:"card-content-sub-desc"},t.delivery_method),ea.createElement(ca.o,null),ea.createElement(ca.X,{className:"card-content-sub-title"},"Tags"),ea.createElement("div",{className:"card-content-sub-desc"},function(e){if(e)return e.map(function(e,t){return ea.createElement(ca.h,{label:e,key:"basic-info-chip-".concat(t)})})}(t.search_terms)),ea.createElement(ca.o,null),ea.createElement(ca.X,{className:"card-content-sub-title"},"Location"),ea.createElement(ca.X,{className:"card-content-sub-desc"},t.country,", ",t.state_province),ea.createElement(ca.o,null),ea.createElement(ca.X,{className:"card-content-sub-title"},"Total Records"),ea.createElement(ca.X,{className:"card-content-sub-desc"},t.num_of_records),ea.createElement(ca.o,null),ea.createElement(ca.X,{className:"card-content-price"}," ",function(e){if(e)return"$".concat(e.toFixed(2))}(t.price_high)),ea.createElement(ur.a,{name:"Rebloc",description:"checkout",panelLabel:"Pay ".concat(t.price_high,"$"),amount:0,token:c,label:"Buy",locale:"auto",stripeKey:"pk_test_nXi9BJxvxTmHWhaj7o58QOE9",image:"https://www.rebloc.io/img/favicon.png",billingAddress:!1})),ea.createElement(ca.E,{open:a,anchorEl:document.getElementById("card-more-options")},ea.createElement(ca.i,{onClickAway:function(){n(!1)}},ea.createElement(ca.F,{onClick:i},ea.createElement(ca.X,null,"Send Email To The Owner")))))},mr=function(e){var t=e.onSave,a=e.onSubmit,n=e.isOpen,r=void 0!==n&&n,i=e.onCancel;return ea.createElement(ca.k,{open:r,maxWidth:"sm"},ea.createElement(ca.n,null,ea.createElement(ca.X,{className:"dialog-header"},ea.createElement("span",{className:"bold"},"UPDATE DATASET INFO")),ea.createElement(ca.X,{className:"dialog-subheader"},"Update Dataset Information Here")),ea.createElement(ca.m,null,ea.createElement(qn,{onSubmit:a,mode:"edit"})),ea.createElement(ca.l,null,ea.createElement(ca.c,{color:"secondary",variant:"outlined",onClick:i},"CANCEL"),ea.createElement(ca.c,{color:"secondary",variant:"contained",onClick:t},"SAVE")))},dr=function(e){var t,a=e.dataset,n=e.onUpdate,r=e.isPublished,i=function(e){return e||"Not Set"};return ea.createElement(ca.d,null,ea.createElement(ca.f,{title:a.name,subheader:a.description,avatar:ea.createElement(ca.b,null," ",ea.createElement(_a.a,null))}),ea.createElement(ca.e,null,ea.createElement(ca.X,{className:"card-content-title"},"Dataset Information"),ea.createElement(ca.X,{className:"card-content-sub-title"},"Delivery Method"),ea.createElement(ca.X,{className:"card-content-sub-desc"},i(a.delivery_method)),ea.createElement(ca.o,null),ea.createElement(ca.X,{className:"card-content-sub-title"},"Tags"),ea.createElement("div",{className:"card-content-sub-desc"},(t=a.search_terms,console.log("here are the terms"),console.log(t),t?t.map(function(e,t){return ea.createElement(ca.h,{label:e,key:"basic-info-chip-".concat(t)})}):ea.createElement(ca.X,null,"Not Set"))),ea.createElement(ca.o,null),ea.createElement(ca.X,{className:"card-content-sub-title"},"Location"),ea.createElement(ca.X,{className:"card-content-sub-desc"},a.country,", ",a.state_province),ea.createElement(ca.o,null),ea.createElement(ca.X,{className:"card-content-sub-title"},"Total Records"),ea.createElement(ca.X,{className:"card-content-sub-desc"},i(a.num_of_records)),ea.createElement(ca.o,null),ea.createElement(ca.X,{className:"card-content-sub-title"},"Price"),ea.createElement(ca.X,{className:"card-content-sub-desc"}," ",i(function(e){if(e)return"$".concat(e.toFixed(2))}(a.price_high))),!r&&ea.createElement(ca.c,{color:"secondary",variant:"contained",className:"dataset-buy",onClick:n},"Update Information")))},hr=function(e){var t=e.input,a=e.label,n=e.meta,r=e.custom,i=void 0!=n.error&&n.touched?n.error:r.helperText;return ta.a.createElement(ca.w,{item:!0,xs:r.gridXs,sm:r.gridSm},ta.a.createElement(ca.U,Object.assign({className:"basic-form-input",margin:"normal",variant:"outlined",placeholder:r.placeholder,label:a,error:n.touched&&void 0!=n.error},t,{type:r.type||"text",fullWidth:!0,helperText:i})))},fr=function(e){var t=e.input,a=e.label,n=e.meta,r=e.custom,i=void 0!=n.error&&n.touched?n.error:r.helperText;return ta.a.createElement(ca.w,{item:!0,xs:r.gridXs,sm:r.gridSm},ta.a.createElement(ca.U,Object.assign({label:a,multiline:!0,rows:"6"},t,{error:n.touched&&void 0!=n.error,className:"basic-form-input",margin:"normal",variant:"outlined",type:"text",fullWidth:!0,helperText:i})))},Er=new za,br=function(e){function t(){return Object(r.a)(this,t),Object(s.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return ta.a.createElement("form",{onSubmit:this.props.onSubmit},ta.a.createElement(ca.w,{spacing:24,container:!0},ta.a.createElement(Xa.a,{label:"Email Subject",component:hr,name:"subject",type:"text",custom:{gridXs:12,gridSm:12,placeholder:"Subject Of The Email"}}),ta.a.createElement(Xa.a,{label:"Email Message",component:fr,name:"message",type:"text",custom:{gridXs:12,gridSm:12,placeholder:"Message Of The Email"}})))}}]),t}(ea.Component),vr=br=Object(Ba.a)({form:"sendEmail",validate:function(e){return Er.validate(e,[{fieldName:"subject",errors:[{type:Pa.REQUIRED}],errorMessages:["A subject is required"]},{fieldName:"message",errors:[{type:Pa.REQUIRED}],errorMessages:["A message is required"]}])},destroyOnUnmount:!0,enableReinitialize:!1})(br),Or=function(e){var t=e.isOpen,a=void 0===t||t,n=e.onCancel,r=e.onSendEmail,i=e.onSubmit;return ea.createElement(ca.k,{open:a,maxWidth:"sm",fullWidth:!0},ea.createElement(ca.n,{id:"alert-dialog-title"},"Send Email To The Dataset Owner"),ea.createElement(ca.m,null,ea.createElement(vr,{onSubmit:i})),ea.createElement(ca.l,null,ea.createElement(Ha.a,{color:"secondary",onClick:r},"Send Email"),ea.createElement(Ha.a,{onClick:n,color:"primary"},"Close")))},yr=function e(t,a,n,i,s,c){Object(r.a)(this,e),this.datasetId=void 0,this.datasetName=void 0,this.from=void 0,this.to=void 0,this.subject=void 0,this.message=void 0,this.to=t,this.from=a,this.subject=n,this.message=i,this.datasetId=s,this.datasetName=c},gr=a(355),Sr=new(function(){function e(){Object(r.a)(this,e)}return Object(i.a)(e,[{key:"downloadFile",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=document.createElement("a");a?n.setAttribute("href","data:text/plain;charset=utf-8,"+t):n.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(JSON.stringify(t,null,2))),n.setAttribute("download",e),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)}},{key:"downloadFileAsCSV",value:function(e,t){var a=this.extractFieldsFromData(t),n=gr.parse(t,{fields:a});this.downloadFile(e,n,!0)}},{key:"extractFieldsFromData",value:function(e){var t=[];if(e.length)for(var a in e[0])t.push(a);return t}}]),e}()),_r=function(e){var t=e.data,a=Sr.extractFieldsFromData(t);return ea.createElement(ca.w,{container:!0,justify:"center"},t.length&&ea.createElement(ca.I,{className:"scroll-paper"},function(e){return ea.createElement(ca.V,{className:"dynamic-toolbar"},ea.createElement("div",{className:"title-container"},ea.createElement(ca.X,{variant:"subtitle1"},ea.createElement("strong",null,"Sample Data"))),ea.createElement("div",null,ea.createElement(ca.c,{variant:"outlined",color:"secondary",onClick:function(){Sr.downloadFile("sample.json",e)}},"Download JSON"),ea.createElement(ca.c,{variant:"outlined",color:"secondary",onClick:function(){Sr.downloadFileAsCSV("sample.csv",e)}},"Download CSV")))}(t),ea.createElement(ca.N,{className:"common-table"},ea.createElement(ca.R,null,ea.createElement(ca.T,null,a.map(function(e){return ea.createElement(ca.P,null,ea.createElement(ca.X,null,e))}))),ea.createElement(ca.O,null,t.map(function(e){return ea.createElement(ea.Fragment,null,function(e,t){return ea.createElement(ca.T,null,t.map(function(t){return ea.createElement(ca.P,null,ea.createElement(ca.X,null,e[t]&&e[t].toString()))}))}(e,a))})))))},Dr=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(s.a)(this,Object(c.a)(t).call(this,e))).pageId=void 0,a.toolbarOptions=[new sr("Schema","schema"),new sr("Sample Data","sampleData")],a.onMoreOptionsMenuChange=a.onMoreOptionsMenuChange.bind(Object(Ra.a)(Object(Ra.a)(a))),a.buyDataset=a.buyDataset.bind(Object(Ra.a)(Object(Ra.a)(a))),a.getSampleDataEmail=a.getSampleDataEmail.bind(Object(Ra.a)(Object(Ra.a)(a))),a.saveBasicInfo=a.saveBasicInfo.bind(Object(Ra.a)(Object(Ra.a)(a))),a.handleBasicFormSubmit=a.handleBasicFormSubmit.bind(Object(Ra.a)(Object(Ra.a)(a))),a.onUpdate=a.onUpdate.bind(Object(Ra.a)(Object(Ra.a)(a))),a.onSchemaChange=a.onSchemaChange.bind(Object(Ra.a)(Object(Ra.a)(a))),a.saveDataset=a.saveDataset.bind(Object(Ra.a)(Object(Ra.a)(a))),a.publishDataset=a.publishDataset.bind(Object(Ra.a)(Object(Ra.a)(a))),a.unpublishDataset=a.unpublishDataset.bind(Object(Ra.a)(Object(Ra.a)(a))),a.updateDataset=a.updateDataset.bind(Object(Ra.a)(Object(Ra.a)(a))),a.onSendEmailSubmit=a.onSendEmailSubmit.bind(Object(Ra.a)(Object(Ra.a)(a))),a.onFilterChange=a.onFilterChange.bind(Object(Ra.a)(Object(Ra.a)(a))),a}return Object(o.a)(t,e),Object(i.a)(t,[{key:"buyDataset",value:function(){this.props.action.changeBuyDatasetDialog(!0)}},{key:"getSampleDataEmail",value:function(){this.props.action.changeSampleDialog(!0)}},{key:"componentDidMount",value:function(){this.setState({filter:"schema"})}},{key:"componentWillMount",value:function(){this.pageId=this.props.match.params.id,this.props.action.getDatasetInfo(this.pageId)}},{key:"onUpdate",value:function(){this.props.action.changeBasicInfoForm(!0)}},{key:"onMoreOptionsMenuChange",value:function(e){this.props.action.changeMoreOptionMenu(e)}},{key:"saveBasicInfo",value:function(){this.props.submitBasicInfoForm()}},{key:"handleBasicFormSubmit",value:function(e){this.props.action.updateDatasetInfo(e),this.props.action.changeBasicInfoForm(!1)}},{key:"onSchemaChange",value:function(e,t,a){this.props.action.changeSchema(e,t,a)}},{key:"updateDataset",value:function(e,t){this.props.action.updateDataset(this.props.dataset,this.props.schema,this.props.profile.id,this.props.dataset.id,e,this.props.enqueueSnackbar,t)}},{key:"saveDataset",value:function(){this.updateDataset(Cn.SAVED,"The Dataset was saved successfully")}},{key:"publishDataset",value:function(){this.updateDataset(Cn.PUBLISHED,"The Dataset was published successfully")}},{key:"unpublishDataset",value:function(){this.updateDataset(Cn.SAVED,"The Dataset was un-published successfully")}},{key:"onSendEmailSubmit",value:function(e){this.props.action.sendEmail(new yr(this.props.dataset.dataset_owner_id,this.props.profile.primary_email,e.subject,e.message,this.props.dataset.id,this.props.dataset.name),this.props.enqueueSnackbar)}},{key:"onFilterChange",value:function(e){this.setState({filter:e}),"sampleData"==e&&this.props.action.getSampleData(this.props.dataset.id)}},{key:"renderMarketPlace",value:function(){var e=this;return ea.createElement("div",{className:"app-section-wrapper-90"},ea.createElement(ca.w,{container:!0,spacing:16},ea.createElement(ca.w,{item:!0,xs:12,sm:4},this.props.isOwner&&ea.createElement(dr,{dataset:this.props.dataset,onUpdate:this.onUpdate,isPublished:this.props.isPublished}),!this.props.isOwner&&ea.createElement(pr,{dataset:this.props.dataset,onMoreOptions:this.onMoreOptionsMenuChange,isMoreOptionsOpened:this.props.datasetInfo.moreOptionsOpened,onBuy:this.props.action.buyDataset,onGetSampleData:this.getSampleDataEmail,handleSendEmail:function(){return e.props.action.changeSendEmailDialog(!0)},user:this.props.profile})),ea.createElement(ca.w,{item:!0,xs:12,sm:8},ea.createElement(ar,{schemas:this.props.schema,onSchemaChange:this.onSchemaChange,schemaName:this.props.dataset.table_name,canEdit:!this.props.isPublished&&this.props.isOwner}))))}},{key:"renderSampleData",value:function(){return ea.createElement(ca.w,{item:!0,xs:12,sm:8},ea.createElement(_r,{data:this.props.sampleData}))}},{key:"render",value:function(){var e=this;return ea.createElement("div",{className:"dataset-info-view"},ea.createElement(ir,{toolbarOptions:this.toolbarOptions,onSchemaFilterChange:this.onFilterChange,schemaFilter:this.state&&this.state.filter,hasPublish:this.props.isOwner,isPublished:this.props.isPublished,onSave:this.saveDataset,onPublish:this.publishDataset,canPublish:this.props.canPublish,unPublish:this.unpublishDataset}),ea.createElement(ca.w,{container:!0,justify:"center"},this.state&&"schema"==this.state.filter&&this.renderMarketPlace(),this.state&&"sampleData"==this.state.filter&&this.renderSampleData()),ea.createElement(mr,{onSave:this.saveBasicInfo,onSubmit:this.handleBasicFormSubmit,isOpen:this.props.datasetInfo.isBasicFormOpen,onCancel:function(){return e.props.action.changeBasicInfoForm(!1)}}),ea.createElement(Or,{isOpen:this.props.datasetInfo.isSendEmailOpen,onCancel:function(){e.props.action.changeSendEmailDialog(!1)},onSendEmail:function(){e.props.action.submit("sendEmail")},onSubmit:this.onSendEmailSubmit}))}}]),t}(ea.Component);Dr=Object(Ka.withSnackbar)(Dr);var Ar=Object(sa.b)(function(e,t){return{dataset:Fn(e),datasetInfo:Ln(e),sampleData:Ln(e).sampleData,schema:Rn(e),isOwner:Un(e),profile:dt(e),canPublish:Gn(e),isPublished:Mn(e)}},function(e){return{submitBasicInfoForm:function(){return e(Object(Ua.b)("contact"))},action:Object(m.b)({getDatasetInfo:Ce,changeMoreOptionMenu:Ie,updateDataset:Pe,updateDatasetInfo:Xe,changeBasicInfoForm:Fe,changeSchema:xe,changeUploadDialog:Re,changeBuyDatasetDialog:Le,changeSendEmailDialog:Me,getSampleData:Ue,sendEmail:Ge,buyDataset:He,submit:Ua.b},e)}})(Dr),Tr=(a(333),function(e,t){e.push("/dataset/".concat(t))}),kr=function(e){var t,a=e.order,n=e.history,r=e.filter,i=e.onSendEmail;return console.log("OrderItem"),console.log(a),ea.createElement(ca.w,{container:!0,className:"order-item-container"},ea.createElement(ca.w,{item:!0,xs:8},ea.createElement(ca.w,{container:!0,spacing:24},ea.createElement(ca.w,{xs:12,item:!0,className:"title-container"},"bought"===r&&ea.createElement(ca.X,{variant:"h6"},"Purchased ",a.order_timestamp," "),"sold"===r&&ea.createElement(ca.X,{variant:"h6"},"Sold ",a.order_timestamp," ")),ea.createElement(ca.w,{xs:2,item:!0},ea.createElement("div",{className:"image-container"},ea.createElement(ca.X,{className:""}," 10 * 10 "))),ea.createElement(ca.w,{xs:10,item:!0},ea.createElement(ca.X,{className:"app-link",onClick:function(){return Tr(n,a.dataset_id)}},a.dataset_name),ea.createElement(ca.X,null,a.dataset_description),ea.createElement(ca.X,null,"Sold By: [PROFILE NAME] "),ea.createElement(ca.X,{className:"price-text"},(t=a.trade)?"$".concat(t.toFixed(2)):"")))),ea.createElement(ca.w,{item:!0,xs:4},"bought"===r&&ea.createElement(ca.c,{className:"order-cta",variant:"outlined",onClick:function(){return i(a)}},"Ask Product Question"),ea.createElement(ca.c,{className:"order-cta",variant:"outlined",onClick:function(){return Tr(n,a.dataset_id)}},"View Dataset")))},jr=function(e){var t=e.orders,a=e.history,n=e.filter,r=e.onSendEmail;return ea.createElement(ca.w,{container:!0,justify:"center"},t.map(function(e){return ea.createElement(ca.w,{item:!0,xs:8,spacing:24,className:"order-item"},ea.createElement(ca.I,null,ea.createElement(kr,{order:e,history:a,filter:n,onSendEmail:r})))}))},Nr=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(s.a)(this,Object(c.a)(t).call(this,e))).toolbarOptions=[new sr("Purchased","bought"),new sr("Sold","sold")],a.setState({filter:"bought",isSendEmailOpen:!1}),a.onToolbarChange=a.onToolbarChange.bind(Object(Ra.a)(Object(Ra.a)(a))),a.onSendEmailSubmit=a.onSendEmailSubmit.bind(Object(Ra.a)(Object(Ra.a)(a))),a.onSendEmail=a.onSendEmail.bind(Object(Ra.a)(Object(Ra.a)(a))),a}return Object(o.a)(t,e),Object(i.a)(t,[{key:"onToolbarChange",value:function(e){this.setState({filter:e})}},{key:"onSendEmailSubmit",value:function(){var e=Object(f.a)(u.a.mark(function e(t){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.actions.sendEmail(new yr(this.state.selectedOrder.seller_id,this.props.profile.primary_email,t.subject,t.message,this.state.selectedOrder.dataset_id,this.state.selectedOrder.dataset_name),this.props.enqueueSnackbar);case 2:return e.next=4,this.setState({isSendEmailOpen:!1});case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"onSendEmail",value:function(e){this.setState({selectedOrder:e,isSendEmailOpen:!0})}},{key:"componentDidMount",value:function(){this.props.actions.getOrders()}},{key:"render",value:function(){var e=this;return ea.createElement(ea.Fragment,null,ea.createElement(ir,{schemaFilter:this.state&&this.state.filter,hasPublish:!1,toolbarOptions:this.toolbarOptions,onSchemaFilterChange:this.onToolbarChange}),ea.createElement("div",{className:"order-container"},ea.createElement(jr,{orders:this.props.orders[this.state&&this.state.filter||"bought"],history:this.props.history,filter:this.state&&this.state.filter||"bought",onSendEmail:this.onSendEmail})),ea.createElement(Or,{isOpen:this.state&&this.state.isSendEmailOpen||!1,onCancel:function(){e.setState({isSendEmailOpen:!1})},onSendEmail:function(){e.props.actions.submit("sendEmail")},onSubmit:this.onSendEmailSubmit}))}}]),t}(ea.Component);Nr=Object(Ka.withSnackbar)(Nr);var wr=Object(On.a)(Nr),Cr=a(113),Ir=a.n(Cr),xr=Object(mt.a)(dt,function(e){return e.OrderState.orders},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=[],n=[];return t.forEach(function(t){var r=Ir()(t.order_timestamp),i=r.isSame(Ir()(),"day"),s=r.isSame(Ir()().subtract(1,"days"),"day");t.order_timestamp=i?"Today":s?"Yesterday":Ir()(t.order_timestamp).format("MMMM Do YYYY"),e.id==t.seller_id?a.push(t):n.push(t)}),{sold:a,bought:n}}),Pr=Object(sa.b)(function(e){return{orders:xr(e),profile:dt(e)}},function(e){return{actions:Object(m.b)({getOrders:lt,sendEmail:Ge,submit:Ua.b},e)}})(wr),Fr=(a(814),a(356)),Rr=a.n(Fr),Lr=a(209),Mr=a.n(Lr),Ur=a(210),Gr=a.n(Ur),Hr=a(357),Xr=a.n(Hr),Br=function(e){var t=e.schemas,a=e.history,n=e.onFilter,r=void 0===n?function(){}:n;return ea.createElement("div",null,0==t.length&&ea.createElement(hn,{title:"No Results Found",content:"No Results Found for the selected filters. Please try applying different filters.",buttonText:"Change Filters",handleClick:r}),t.length>0&&ea.createElement(ea.Fragment,null,t.map(function(e,t){return ea.createElement(ca.q,{key:"schema".concat(t),expanded:!1,className:"schema-panel"},ea.createElement(ca.s,{className:"schema-list",onClick:function(){return function(e){a.push("/dataset/".concat(e.id))}(e)}},ea.createElement(ca.w,{container:!0,justify:"flex-start",className:"no-pad-right"},ea.createElement(ca.w,{item:!0,xs:10,sm:7},ea.createElement("div",{className:"fake-image"},ea.createElement("p",null,"70 x 70")),ea.createElement(ca.X,{className:"header",variant:"subtitle1"},e.name),ea.createElement(ca.X,{className:"sub-header",variant:"subtitle2"},e.description),ea.createElement(ca.X,{className:"description"},ea.createElement("b",null,"ProfileName")," ",ea.createElement("span",null,"Date goes here"))),ea.createElement(ca.x,{xsDown:!0},ea.createElement(ca.w,{item:!0,xs:1},e.search_terms.map(function(e){return ea.createElement(ca.X,{key:"tag-".concat(e,"-").concat(t*Math.random()),className:"search-tag",variant:"body2"},e)})),ea.createElement(ca.w,{item:!0,xs:4},ea.createElement(ca.w,{container:!0},ea.createElement(ca.w,{item:!0,xs:6},ea.createElement(ca.W,{title:"Number of records",placement:"top-start"},ea.createElement(ca.X,{variant:"body2",className:"descriptor"},ea.createElement(Rr.a,null)," ",e.num_of_records," ")),ea.createElement(ca.W,{title:"Country",placement:"top-start"},ea.createElement(ca.X,{variant:"body2",className:"descriptor"},ea.createElement(Mr.a,null)," ",e.country," ")),ea.createElement(ca.W,{title:"State/Province",placement:"top-start"},ea.createElement(ca.X,{variant:"body2",className:"descriptor"},ea.createElement(Mr.a,null)," ",e.state_province," "))),ea.createElement(ca.w,{item:!0,xs:6},ea.createElement(ca.W,{title:"File Type",placement:"top-start"},ea.createElement(ca.X,{variant:"body2",className:"descriptor"},ea.createElement(Xr.a,null)," JSON ")),ea.createElement(ca.W,{title:"High Asking Price",placement:"top-start"},ea.createElement(ca.X,{variant:"body2",className:"descriptor money"},ea.createElement(Gr.a,null)," ",e.price_high," ")),ea.createElement(ca.W,{title:"Low Asking Price",placement:"top-start"},ea.createElement(ca.X,{variant:"body2",className:"descriptor money"},ea.createElement(Gr.a,null)," ",e.price_low," ")))))))))})))},Vr=a(146),zr=a.n(Vr),Wr=a(360),Jr=a.n(Wr),qr=a(358),Yr=a.n(qr),Kr=function(e){var t=e.schemas,a=e.onDeleteClick,n=e.onAddClicked,r=e.history;return ea.createElement("div",{className:"schema-list"},0!=t.length&&ea.createElement("div",null,t.map(function(e,t){return ea.createElement(ca.q,{key:"userSchema".concat(t),expanded:!1,onClick:function(){return function(e){r.push("/dataset/".concat(e.id))}(e)}},ea.createElement(ca.s,{className:"schema-list"},ea.createElement(ca.w,{container:!0,justify:"flex-start",className:"no-pad-right"},ea.createElement(ca.w,{item:!0,xs:6,sm:9},ea.createElement("div",{className:"fake-image-own"},ea.createElement("p",null,"50")),ea.createElement(ca.X,{variant:"subtitle1",className:"header"},e.name),ea.createElement(ca.X,{variant:"subtitle2",className:"sub-header"},e.description," ",function(e){return console.log("rendering chips"),console.log(e),2==e.stage?ea.createElement(ca.h,{label:"Saved",className:"save-chip"}):3==e.stage?ea.createElement(ca.h,{label:"Published",className:"published-chip"}):void 0}(e))),ea.createElement(ca.w,{item:!0,xs:6,sm:3,className:"action-container"},ea.createElement(ca.w,{container:!0,justify:"flex-end"},ea.createElement(ca.z,{onClick:function(t){!function(e,t){e.stopPropagation(),a(t)}(t,e)}}," ",ea.createElement(Yr.a,null)))))))})),0==t.length&&ea.createElement(hn,{title:"No Datasets Found",content:"Create a new Dataset by clicking on the button below",buttonText:"Create Dataset",handleClick:function(){n()}}))},Qr=function(e){return e.MarketplaceState},$r=function(e){return e.MarketplaceState.datasetDialog},Zr=function(e){return e.MarketplaceState.confirmDeleteDialog},ei=Object(mt.a)(function(e){return e.MarketplaceState&&e.MarketplaceState.datasets},dt,function(e,t){return e.filter(function(e){return e.dataset_owner_id!=t.id})}),ti=function(e){return e.DatasetFormState.schema},ai=function(e){return e.DatasetFormState},ni=Object(mt.a)([function(e){return e.form.contact}],function(e){return e&&e.values?e.values:{}}),ri=Object(mt.a)([function(e){return e.DatasetFormState.wizard},$r],function(e,t){return"edit"==t.mode?e.editSteps:e.steps}),ii=function(e){return e.Common.topics};var si=Object(sa.b)(function(e){return console.log(e),{schemaFile:Object.assign({},b(e).files.find(function(e){return"schemaFile"==e.fileId})),wizard:e.DatasetFormState.wizard,basicInfo:ni(e),schema:Object.assign([],ti(e)),schemaName:ai(e).schemaName,displaySchemaError:e.DatasetFormState.displayNoSchemaError,profile:dt(e),isProfileSet:bt(e),datasetDialog:$r(e),datasetForm:e.DatasetFormState,steps:ri(e),topics:ii(e)}},function(e){return{onFileUpload:function(t){return e({type:"FILE_UPLOADED",fileId:t,validator:y,callbackAction:"LOAD_SCHEMA_LIST"})},onFileChangeAndUpload:function(t,a){return e({type:"FILE_CHANGED_AND_UPLOADED",validator:y,callbackAction:"LOAD_SCHEMA_LIST",file:t,fileId:a})},actions:Object(m.b)({nextStep:x,prevStep:P,changeDisplaySchemaError:F,getTopics:Dt,changeDialogState:me,updateDatasetForm:R,saveDatasetForm:L,resetForm:M,submit:Ua.b,destroy:Ua.a},e)}})(rr),ci=a(148),oi=a.n(ci),li=a(211),ui=a.n(li),pi=a(359),mi=a.n(pi),di=(a(816),function(e){var t=e.terms,a=e.onDelete;return ea.createElement(ca.I,{className:"term-list"},0==t.length&&ea.createElement(ca.X,{variant:"subheading"},"No Search Terms Applied"),t.length>0&&ea.createElement(ca.X,{variant:"subheading"},"Terms"),t.map(function(e){return ea.createElement(ca.h,{label:"".concat(e),variant:"outlined",color:"primary",className:"term-item",onDelete:function(){return a(e)}})}))}),hi=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(s.a)(this,Object(c.a)(t).call(this,e))).handleTermKeyPress=function(e){13==e.which&&a.addTerm(a.state.addTermInput)},a.addTerm=function(e){e&&a.setState(function(t){return{terms:[].concat(Object(p.a)(t.terms.filter(function(t){return t!=e})),[e]),addTermInput:""}})},a.deleteTerm=function(e){a.setState(function(t){return{terms:Object(p.a)(t.terms.filter(function(t){return t!=e}))}})},a.onCountrySelect=function(e){var t=e.target.value;a.setState({selectedCountry:t,stateList:Xn.a.getStatesOfCountry(t.id),cityList:[],selectedState:""})},a.onStateSelect=function(e){var t=e.target.value;a.setState({selectedState:t,selectedCity:"",cityList:Xn.a.getCitiesOfState(t.id)})},a.onCitySelect=function(e){var t=e.target.value;a.setState({selectedCity:t})},a.onTopicSelect=function(e,t){var n=a.state.selectedTopics,r={};r[t]=e.target.checked,a.setState({selectedTopics:Object.assign({},n,r)})},a.applyFilters=function(){var e=a.state,t=e.selectedCity,n=e.selectedState,r=e.selectedCountry,i=e.selectedTopics,s=e.terms,c=[];for(var o in i)i[o]&&c.push(o);t||n||r||c.length||s.length?a.props.onApply({selectedCity:t&&t.name||"",selectedState:n&&n.name||"",selectedCountry:r&&r.name||"",topics:c,terms:s}):a.props.onApply({})},a.resetFilters=function(){a.setState({cityList:[],stateList:[],selectedCity:"",selectedState:"",selectedCountry:"",selectedTopics:{},terms:[]})},console.log(Xn.a.getAllCountries()),a.state={countryList:Xn.a.getAllCountries().filter(a.filterCountries),cityList:[],stateList:[],selectedCity:"",selectedState:"",selectedCountry:"",selectedTopics:{},addTermInput:"",terms:[]},a}return Object(o.a)(t,e),Object(i.a)(t,[{key:"filterCountries",value:function(e){return"United States"==e.name||"Canada"==e.name}},{key:"componentDidMount",value:function(){this.props.actions.getTopics()}},{key:"renderTopicCheckboxes",value:function(){var e=this,t=this.props.topics;return ea.createElement(ca.v,null,t.map(function(t){var a=e.state.selectedTopics[t.name];return console.log(e.state.selectedTopics),ea.createElement(ca.t,null,ea.createElement(ca.u,{control:ea.createElement(ca.g,{checked:a||!1}),onChange:function(a){return e.onTopicSelect(a,t.name)},label:t.name}))}))}},{key:"renderFilters",value:function(){var e=this;return ea.createElement(ea.Fragment,null,ea.createElement(ca.w,{item:!0,xs:12},ea.createElement(ca.q,{className:"filter-item"},ea.createElement(ca.s,{expandIcon:ea.createElement(oi.a,null),"aria-controls":"panel1c-content"},ea.createElement(ca.X,{className:"filter-menu-title"},ea.createElement(ui.a,null),ea.createElement("span",null,"SEARCH TERMS"))),ea.createElement(ca.r,null,ea.createElement(ca.w,{container:!0},ea.createElement(ca.w,{xs:12},ea.createElement(ca.I,{elevation:2},ea.createElement(ca.A,{placeholder:"Add Search Terms",className:"filter-input",onKeyPress:this.handleTermKeyPress,value:this.state.addTermInput,onChange:function(t){return e.setState({addTermInput:t.target.value})}}),ea.createElement(ca.z,{onClick:function(){return e.addTerm(e.state.addTermInput)}},ea.createElement(zr.a,null))),ea.createElement(di,{terms:this.state.terms,onDelete:this.deleteTerm}))))),ea.createElement(ca.q,{className:"filter-item"},ea.createElement(ca.s,{expandIcon:ea.createElement(oi.a,null),"aria-controls":"panel1c-content"},ea.createElement(ca.X,{className:"filter-menu-title"},ea.createElement(ui.a,null),ea.createElement("span",null,"LOCATION"))),ea.createElement(ca.r,null,ea.createElement(ca.w,{container:!0},ea.createElement(ca.w,{item:!0,xs:12},ea.createElement(ca.t,{variant:"outlined",className:"filter-menu-control"},ea.createElement(ca.B,{htmlFor:"country-filter"},"Country"),ea.createElement(ca.J,{input:ea.createElement(ca.H,{labelWidth:120,id:"country-filter"}),onChange:this.onCountrySelect,value:this.state.selectedCountry},this.state.countryList.map(function(e){return ea.createElement(ca.F,{value:e},e.name)})))),ea.createElement(ca.t,{variant:"outlined",className:"filter-menu-control"},ea.createElement(ca.B,{htmlFor:"state-filter"},"State/Province"),ea.createElement(ca.J,{input:ea.createElement(ca.H,{labelWidth:120,id:"state-filter"}),onChange:this.onStateSelect,value:this.state.selectedState},this.state.stateList.map(function(e){return ea.createElement(ca.F,{value:e},e.name)}))),ea.createElement(ca.t,{variant:"outlined",className:"filter-menu-control"},ea.createElement(ca.B,{htmlFor:"city-filter"},"City"),ea.createElement(ca.J,{input:ea.createElement(ca.H,{labelWidth:120,id:"city-filter"}),onChange:this.onCitySelect,value:this.state.selectedCity},this.state.cityList.map(function(e){return ea.createElement(ca.F,{value:e},e.name)}))))))),ea.createElement(ca.w,{item:!0,xs:12},ea.createElement(ca.q,{className:"filter-item"},ea.createElement(ca.s,{expandIcon:ea.createElement(oi.a,null),"aria-controls":"panel1c-content"},ea.createElement(ca.X,{className:"filter-menu-title"},ea.createElement(mi.a,null),ea.createElement("span",null,"CATEGORIES"))),ea.createElement(ca.r,null,this.renderTopicCheckboxes()))))}},{key:"render",value:function(){return ea.createElement(ca.w,{container:!0},ea.createElement(ca.I,{className:"filter-menu-container"},ea.createElement(ca.w,{item:!0,xs:12},ea.createElement(ca.z,{onClick:this.props.onClose},ea.createElement(ma.a,null)),ea.createElement(ca.X,{variant:"h6",className:"filter-header"},"Filter Your Results")),this.renderFilters(),ea.createElement(ca.c,{variant:"outlined",color:"primary",onClick:this.applyFilters,className:"filter-cta"},"Apply Filters"),ea.createElement(ca.c,{variant:"outlined",color:"secondary",onClick:this.resetFilters,className:"filter-cta"},"Reset Filters")))}}]),t}(ea.Component),fi=Object(sa.b)(function(e){return{topics:ii(e)||[]}},function(e){return{actions:Object(m.b)({getTopics:Dt},e)}})(hi),Ei=function(e){var t=e.datasets,a=e.handleClick;return ea.createElement(ea.Fragment,null,ea.createElement(ea.Fragment,null,t.map(function(e,t){return ea.createElement(ca.q,{key:"userSchema".concat(t),expanded:!1},ea.createElement(ca.s,{className:"schema-list"},ea.createElement(ca.w,{container:!0,justify:"flex-start",className:"no-pad-right"},ea.createElement(ca.w,{item:!0,xs:6,sm:9},ea.createElement("div",{className:"fake-image-own"},ea.createElement("p",null,"50")),ea.createElement(ca.X,{variant:"subtitle1",className:"header"},e.dataset_name),ea.createElement(ca.X,{variant:"subtitle2",className:"sub-header"},e.dataset_description," (",ea.createElement("i",null,"Purchased On: ",e.order_timestamp),")")),ea.createElement(ca.w,{item:!0,xs:6,sm:3,className:"action-container"},ea.createElement(ca.w,{container:!0,justify:"flex-end"},ea.createElement(ca.c,{variant:"outlined",color:"primary",onClick:function(){return a(e)}},"View Dataset"))))))})))},bi=function(e){return 0===Object.keys(e).length&&e.constructor===Object},vi=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(s.a)(this,Object(c.a)(t).call(this,e))).toolbarOptions=[new sr("Purchasable","purchasable"),new sr("OWNED BY ME","ownedByMe"),new sr("PURCHASED","purchased")],a.onFilter=function(e){a.setState({filters:e}),""==a.state.search&&bi(e)?a.props.actions.getAllDatasets():a.props.actions.searchDatasets(e)},a.handleSchemaChange=a.handleSchemaChange.bind(Object(Ra.a)(Object(Ra.a)(a))),a.openDialog=a.openDialog.bind(Object(Ra.a)(Object(Ra.a)(a))),a.handleOnDelete=a.handleOnDelete.bind(Object(Ra.a)(Object(Ra.a)(a))),a.onConfirmationClose=a.onConfirmationClose.bind(Object(Ra.a)(Object(Ra.a)(a))),a.confirmDelete=a.confirmDelete.bind(Object(Ra.a)(Object(Ra.a)(a))),a.onSearchChange=a.onSearchChange.bind(Object(Ra.a)(Object(Ra.a)(a))),a.state={purchasedDatasetsRetrieved:!1,filterDrawerOpen:!1,search:"",filters:{}},a}return Object(o.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.props.actions.getAllDatasets(),this.props.actions.getUserDatasets()}},{key:"handleSchemaChange",value:function(e){"purchased"==e&&(this.state.purchasedDatasetsRetrieved||this.props.actions.getOrders()),this.props.actions.updateSchemaFilter(e)}},{key:"openDialog",value:function(){this.props.actions.changeDialogState(!0,"add",void 0)}},{key:"handleOnDelete",value:function(e){this.props.actions.changeConfirmDialogState(!0,e)}},{key:"onConfirmationClose",value:function(){this.props.actions.changeConfirmDialogState(!1,{name:""})}},{key:"confirmDelete",value:function(){this.props.actions.deleteDataset(this.props.confirmDeleteDialog.dataset.id),this.props.actions.changeConfirmDialogState(!1,{name:""})}},{key:"onSearchChange",value:function(e){this.props.actions.changeSearch(e.target.value)}},{key:"renderAddButton",value:function(){return this.props.isProfileSet&&("purchasable"==this.props.schemaFilter||"ownedByMe"==this.props.schemaFilter&&this.props.userDatasets.length)?ea.createElement(ca.c,{variant:"contained",color:"secondary",className:"add-schema",onClick:this.openDialog},"Add",ea.createElement(zr.a,null)):null}},{key:"renderFilterButton",value:function(){var e=this;return"purchasable"==this.props.schemaFilter?ea.createElement(ca.c,{variant:"contained",onClick:function(){return e.setState({filterDrawerOpen:!0})},className:"add-schema"},"Advanced Search ",ea.createElement(Jr.a,null)):null}},{key:"render",value:function(){var e=this;return ea.createElement("div",{className:"marketplace"},ea.createElement(ca.p,{onClose:function(){},open:this.state.filterDrawerOpen,anchor:"left",variant:"persistent",className:"filter-drawer"},ea.createElement(fi,{onApply:this.onFilter,onClose:function(){return e.setState({filterDrawerOpen:!1})}})),ea.createElement(ir,{onSchemaFilterChange:this.handleSchemaChange,schemaFilter:this.props.schemaFilter,toolbarOptions:this.toolbarOptions,hasPublish:!1}),ea.createElement(ca.w,{container:!0,justify:"center"},ea.createElement("div",{className:"app-section-wrapper"},ea.createElement(ca.w,{container:!0,justify:"flex-end"},this.renderFilterButton(),this.renderAddButton()),ea.createElement(ca.w,{item:!0,xs:12,sm:12},"purchasable"==this.props.schemaFilter&&ea.createElement(Br,{schemas:this.props.purchasableDatasets,history:this.props.history,onFilter:function(){return e.setState({filterDrawerOpen:!0})}}),"ownedByMe"==this.props.schemaFilter&&this.props.isProfileSet&&ea.createElement(Kr,{schemas:this.props.userDatasets,onDeleteClick:this.handleOnDelete,onAddClicked:this.openDialog,history:this.props.history}),"ownedByMe"==this.props.schemaFilter&&!this.props.isProfileSet&&ea.createElement(hn,{title:"Welcome,",content:"Creating new datasets requires a profile. Please create a profile before continuing",buttonText:"Create Profile",handleClick:function(){e.props.history.push("/profile")}}),"purchased"==this.props.schemaFilter&&ea.createElement(Ei,{datasets:this.props.purchasedDatasets,handleClick:function(t){e.props.history.push("/dataset/".concat(t.dataset_id))}})),ea.createElement(si,null),ea.createElement(ca.k,{open:this.props.confirmDeleteDialog.open,maxWidth:"sm",fullWidth:!0},ea.createElement(ca.n,null,this.props.confirmDeleteDialog.dataset.name),ea.createElement(ca.m,null,"Do you want to delete?"),ea.createElement(ca.l,null,ea.createElement(ca.c,{onClick:this.confirmDelete},"Ok"),ea.createElement(ca.c,{onClick:this.onConfirmationClose},"Cancel"))))))}}]),t}(ea.Component),Oi=Object(On.a)(vi);var yi=Object(sa.b)(function(e){var t=xr(e);return{schemaFilter:Qr(e).schemaFilter,profile:dt(e),isProfileSet:bt(e),datasets:Qr(e).datasets,userDatasets:Qr(e).userDatasets,datasetDialog:$r(e),confirmDeleteDialog:Zr(e),marketplace:Qr(e),purchasableDatasets:ei(e),purchasedDatasets:t&&t.bought||[]}},function(e){return{actions:Object(m.b)({updateSchemaFilter:pe,changeDialogState:me,changeSearch:he,changeConfirmDialogState:de,getUserDatasets:fe,searchDatasets:Oe,deleteDataset:ve,getAllDatasets:Ee,getOrders:lt},e)}})(Oi),gi=a(212),Si=a.n(gi),_i=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(s.a)(this,Object(c.a)(t).call(this,e))).verifyEmail=a.verifyEmail.bind(Object(Ra.a)(Object(Ra.a)(a))),a}return Object(o.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=Si.a.parse(this.props.location.search).email;this.props.actions.checkProfile(e)}},{key:"verifyEmail",value:function(e,t){t&&e&&this.props.actions.verifyEmail(e,t,this.props.enqueueSnackbar)}},{key:"render",value:function(){var e=this,t=Si.a.parse(this.props.location.search),a=t.email,n=t.code;return ea.createElement(ea.Fragment,null,this.props.profileStatus==pt.NOT_VERIFIED&&ea.createElement(hn,{title:"Email Verification",content:"Please verify the following email address ".concat(a),buttonText:"Verify",handleClick:function(){return e.verifyEmail(a,n)}}),this.props.profileStatus==pt.ALREADY_VERIFIED&&ea.createElement(hn,{title:"Email Already Verified",content:"The email ".concat(a," has already been verified."),buttonText:"Go To Marketplace",handleClick:function(){e.props.history.push("/marketplace")}}),this.props.profileStatus==pt.NOT_CREATED&&ea.createElement(hn,{title:"Account not found",content:"Please register the email ".concat(a),buttonText:"Register",handleClick:function(){e.props.history.push("/")}}),this.props.profileStatus==pt.VERIFIED&&ea.createElement(hn,{title:"Email Verification Complete",content:"".concat(a," has been verified"),buttonText:"Go To Marketplace",handleClick:function(){e.props.history.push("/marketplace")}}))}}]),t}(ea.Component);_i=Object(Ka.withSnackbar)(_i);var Di=Object(On.a)(_i),Ai=Object(sa.b)(function(e){return{profileStatus:vt(e)}},function(e){return{actions:Object(m.b)({verifyEmail:W,checkProfile:z},e)}})(Di),Ti=function(e){var t=e.profile,a=e.actions,n=e.wasVerificationSent;return console.log("Is the email verified"),console.log(t),ea.createElement(ea.Fragment,null,0==n&&ea.createElement(hn,{title:"Verify Your Email Address",content:"\n            We now need to verify your email address. We've sent an email to\n            ".concat(t&&t.primary_email||"","\n            to verify your address. Please click the link in the email to continue.\n          "),buttonText:"Resend Email",handleClick:function(){return a.resendVerification(t.primary_email)}}),1==n&&ea.createElement(hn,{title:"Verification Email Sent",content:"\n            Please click the link in the email to continue.\n          ",hideCta:!0}))},ki=Object(sa.b)(function(e){return{profile:dt(e),wasVerificationSent:ft(e)}},function(e){return{actions:Object(m.b)({resendVerification:J},e)}})(Ti),ji=ki=Object(Ka.withSnackbar)(ki),Ni=new In,wi=function(e){var t=e.component,a=e.authenticated,n=Object(ra.a)(e,["component","authenticated"]);return ta.a.createElement(An.a,Object.assign({},n,{render:function(e){return!0===a?ta.a.createElement(t,Object.assign({},e,{auth:n.auth})):ta.a.createElement(Tn.a,{to:{pathname:"/home",state:{from:e.location}}})}}))},Ci=function(e){var t=e.component,a=e.authenticated,n=Object(ra.a)(e,["component","authenticated"]);return ta.a.createElement(An.a,Object.assign({},n,{render:function(e){return!1===a?ta.a.createElement(Tn.a,{to:{pathname:"/home",state:{from:e.location}}}):Ni.isUserVerified?ta.a.createElement(t,Object.assign({},e,{auth:n.auth})):ta.a.createElement(ji,null)}}))},Ii=function(){return ta.a.createElement("div",null,ta.a.createElement(kn.a,{history:En},ta.a.createElement("div",null,ta.a.createElement(Fa,{auth:Ni}),ta.a.createElement(An.a,{path:"/",exact:!0,render:function(e){return ta.a.createElement(vn,Object.assign({auth:Ni},e))}}),ta.a.createElement("main",{role:"main"},ta.a.createElement(An.a,{path:"/home",render:function(e){return ta.a.createElement(vn,Object.assign({auth:Ni},e))}}),ta.a.createElement(wi,{path:"/dashboard",component:un,auth:Ni,authenticated:Ni.authenticated}),ta.a.createElement(Ci,{path:"/dataexplorer",component:Dn,auth:Ni,authenticated:Ni.authenticated}),ta.a.createElement(Ci,{path:"/profile",component:Za,auth:Ni,authenticated:Ni.authenticated}),ta.a.createElement(Ci,{path:"/dataset-manager",component:rr,auth:Ni,authenticated:Ni.authenticated}),ta.a.createElement(Ci,{path:"/marketplace",component:yi,auth:Ni,authenticated:Ni.authenticated}),ta.a.createElement(Ci,{path:"/dataset/:id",component:Ar,auth:Ni,authenticated:Ni.authenticated}),ta.a.createElement(Ci,{path:"/order/history",component:Pr,auth:Ni,authenticated:Ni.authenticated}),ta.a.createElement(An.a,{path:"/VerificationPage",component:Ai,auth:Ni,authenticated:Ni.authenticated}),ta.a.createElement(An.a,{path:"/callback",render:function(e){return/access_token|id_token|error/.test(location.hash)&&Ni.handleAuthentication(),ta.a.createElement(mn,e)}})))))},xi=(a(829),a(831),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)));function Pi(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}console.log("Here are all countries");var Fi=Object(oa.createMuiTheme)({typography:{fontFamily:"Roboto",useNextVariants:!0},overrides:{MuiStepIcon:{active:{color:"#6996B6 !important"}}},palette:{primary:{main:"#47494D",light:"#6B6D70",dark:"#313335",contrastText:"#FFF"},secondary:{main:"#6996B6",light:"#87ABC4",dark:"#49697F",contrastText:"#FFF"}}}),Ri=$t.getInstance();Ri.initialize();var Li=function(e){function t(e){var a;return Object(r.a)(this,t),a=Object(s.a)(this,Object(c.a)(t).call(this,e)),wn.getInstance().on("authenticated",function(){a.forceUpdate()}),a}return Object(o.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return ta.a.createElement(Ka.SnackbarProvider,{maxSnack:3,anchorOrigin:{vertical:"top",horizontal:"right"}},ta.a.createElement(sa.a,{store:Ri.store},ta.a.createElement(oa.MuiThemeProvider,{theme:Fi},ta.a.createElement(Ii,null))))}}]),t}(ta.a.Component);na.a.render(ta.a.createElement(Li,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location.toString()).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("","/service-worker.js");xi?function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):Pi(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e):Pi(e)})}}()}},[[422,2,1]]]);
//# sourceMappingURL=main.160d88b7.chunk.js.map